2000-11-05  Simon Josefsson  <sj@extundo.com>

	* mml-smime.el (mml-smime-verify): Work in original multipart
	buffert.

	* mm-decode.el (mm-handle-multipart-original-buffer): New macro.
	(mm-handle-multipart-ctl-parameter): Ditto.
	(mm-alist-to-plist): New function.
	(mm-dissect-buffer): Store CTL parameters and copy original buffer
	for multiparts.
	(mm-destroy-parts): Destroy multipart buffert.
	(mm-remove-part): Ditto.

	* mml-smime.el (mml-smime-sign): Not used.
	(mml-smime-encrypt): Ditto.

	* mm-decode.el (mml-smime-verify): Autoload mml-smime.

	Verify S/MIME signature support.
	
	* mm-decode.el (mm-inline-media-tests): Add
	application/{x-,}pkcs7-signature.
	(mm-inlined-types): Ditto.
	(mm-automatic-display): Ditto.
	(mm-verify-function-alist): Ditto.  Add name of method.
	(mm-decrypt-function-alist): Add name of method.
	(mm-find-part-by-type): Add documentation.
	(mm-possibly-verify-or-decrypt): Use new format of
	mm-{verify,decrypt}-function-alist.  Use method names.

	* mml-smime.el (mml-smime-verify): New function.

2000-11-04 20:38:50  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-view.el (mm-inline-text): Move point to the end of inserted text.

2000-11-04 19:07:08  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-function-alist): Clear verify and decrypt.
	* mm-uu.el: Reorganized.  Add gnatsweb, pgp-signed, pgp-encrypted.
	* mm-decode.el (mm-snarf-option): New.

2000-11-04 13:08:02  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-util.el (mm-subst-char-in-string): New function.
	(mm-replace-chars-in-string): Use it.
	* message.el (message-replace-chars-in-string): Use it.
	* nnheader.el (nnheader-replace-chars-in-string): Use it.
	* gnus-mh.el (mh-lib-progs): Shut up.

2000-11-04  ShengHuo Zhu  <zsh@cs.rochester.edu>

	* base64.el, md5.el: Moved to contrib directory.

2000-11-04 11:13:56  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-summary-search-article-forward): Don't move
	the last article when search.

2000-11-04 10:34:29  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnheader.el (nnheader-pathname-coding-system): Default iso-8859-1.
	* nnmail.el (nnmail-pathname-coding-system): Ditto.

2000-09-29  David Edmondson  <dme@thus.net>

	One-line patch.
	
	* message.el (message-newline-and-reformat): Typo.

2000-11-04 10:11:05  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* rfc2231.el (rfc2231-decode-encoded-string): Test mm-multibyte-p.

2000-11-04 09:53:42  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nntp.el (nntp-decode-text): Delete bogus status lines.

2000-11-03  Stefan Monnier  <monnier@cs.yale.edu>

	* message.el (message-font-lock-keywords): Match a final newline
	to help font-lock's multiline support.
	
2000-11-04 09:11:44  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnoo.el (nnoo-set): New function.

2000-11-04  ShengHuo Zhu  <zsh@cs.rochester.edu>

	* gpg.el, gpg-ring.el: Moved to contrib directory.

2000-11-04  Simon Josefsson  <sj@extundo.com>

	* nnimap.el (nnimap-split-inbox): Typo.

2000-11-03 10:46:44  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-msg.el (gnus-msg-mail): Move it backwards.

2000-11-03  Simon Josefsson  <sj@extundo.com>

	* rfc2231.el (rfc2231-parse-qp-string): New function.
	(require): rfc2047.

	* mail-parse.el (mail-header-parse-content-type):
	(mail-header-parse-content-disposition): Support invalid QP
	encoded strings, by using `rfc2231-parse-qp-string'.

2000-11-03 08:58:08  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* rfc2231.el (rfc2231-parse-string): Decode when there is no number.
	(rfc2231-decode-encoded-string): Typo "> X 1".
	(rfc2231-encode-string): Insert the name of charset.
	* mail-parse.el (mail-header-encode-parameter): Use RFC2231.

2000-11-02 23:35:50  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-save-part): Return the filename.
	* gnus-sum.el (gnus-summary-edit-article): Remove a hack.
	* gnus-art.el (gnus-mime-save-part-and-strip): New function.
	(gnus-mime-action-alist): Use it.
	(gnus-mime-button-commands): USe it.
	* mm-extern.el (mm-extern-local-file): Error when the file is gone.
	(mm-inline-external-body): unwind-protect.

2000-11-02 21:08:49  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-insert-mime-button): Show url.

2000-11-02 19:51:19  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-generate-mime-1): Support external url.
	* nnwarchive.el (nnwarchive-mail-archive-article): Use external url.

2000-11-02 16:53:32  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-partial.el (mm-inline-partial): Buffer name with a leading space.
	* mm-decode.el (mm-display-external): Ditto.
	* mm-extern.el: New file.
	* mm-decode.el (mm-inline-media-tests): Hook it up.
	(mm-inlined-types): Inline message/external-body.

2000-11-02  Simon Josefsson  <sj@extundo.com>

	* gnus-art.el (gnus-visible-headers): Add Mail-Followup-To.

	* message.el (message-get-reply-headers): Better handling when
	Mail-Followup-To is very large.
	
2000-11-02 13:27:56  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-uu.el (gnus-uu-post-news): Comment out the redundancy.  
	* gnus-art.el (gnus-article-edit-done): 
	* gnus-sum.el (gnus-summary-edit-article-done): Move line 
	counting code here.
	* gnus-msg.el (gnus-setup-message): Remove a hack.

2000-11-02 09:33:01  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-newsgroup-variables): New variable.
	(gnus-summary-mode): Make them local variables. 
	(gnus-set-global-variables): Globalize them.
	(gnus-summary-exit): Kill them.

2000-11-02  Hrvoje Niksic  <hniksic@arsdigita.com>

	* rfc2047.el (rfc2047-encoded-word-regexp): Allow empty encoded
	word.

2000-11-01 10:07:13  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-display-part): Add to signed or encrypted.
	gnus-article-wash-types.
	* gnus-art.el (gnus-article-wash-status): Use them.

2000-11-01 08:54:11  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-read-tag): Remove spaces and LF.

2000-11-01 08:01:03  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-mailcrypt-encrypt): Use from and sign parameters.
	* mml.el (mml-generate-mime-1): Add sender and recipients attributes.

2000-11-01 07:39:24  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-summary-force-verify-and-decrypt): New function.

2000-10-31 22:06:13  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-article-charset): New variable.
	(gnus-summary-display-article): Set it.
	* gnus-msg.el (gnus-copy-article-buffer): Use it.
	* gnus-art.el (gnus-article-mode): Make it local variable.

2000-11-01 01:12:29  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnultimate.el (nnultimate-create-mapping): Use nreverse. 

2000-10-31 23:45:31  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnwfm.el: New file.

	* nnweb.el (nnweb-replace-in-string): New function.

2000-10-31 17:32:02  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el: Wrap gpg.el.
	* gpg.el (gpg-verify): The last argument of apply is a list.
	(gpg-encrypt): Add passphrase as a parameter.

2000-10-31 17:28:45  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gpg.el: New file.
	* gpg-ring.el: New file.

2000-10-31 11:44:29  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-summary-show-article): Fix the summary line.

2000-10-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-insert-line): Work with quoted
	double-quote charcters.
	(gnus-summary-prepare-threads): Ditto.

2000-10-31 08:36:03  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-display-single): Forward line -1.
	* mml.el (mml-read-tag): Don't skip the leading space.
	* lpath.el (font-lock-set-defaults): Shut up.

2000-10-31 00:04:35  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el: Fix doc. Remove bogus mml2015-setup.

2000-10-30 23:37:07  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* qp.el (quoted-printable-encode-region): Replace leading - when
	ultra safe.
	* mml.el (mml-generate-mime-postprocess-function): Removed.
	(mml-postprocess-alist): Removed.
	(mml-generate-mime-1): Use ultra-safe when sign.
	* mml2015.el (mml2015-fix-micalg): Uppercase.
	(mml2015-verify): Insert LF.
	(mml2015-mailcrypt-sign): Downcase; search backward.

2000-10-16 11:36:52  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnultimate.el (nnultimate-forum-table-p): Be a bit more
	restrictive. 
	(nnultimate-table-regexp): New variable.
	(nnultimate-forum-table-p): Use it.

2000-10-30  Ed L Cashin <ecashin@coe.uga.edu>

	* gnus-sum.el (gnus-summary-expire-articles): Save point.

2000-10-30 08:52:50  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml-sec.el (mml-pgpmime-sign-buffer): Use mml2015-sign.
	(mml-pgpmime-encrypt-buffer): Use mml2015-encrypt.

2000-10-30 08:38:12  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el: Shut up.

2000-10-30 08:17:46  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus.el (gnus-server-browse-hashtb): Removed.
	* gnus-group.el (gnus-group-prepare-flat-list-dead): Use gnus-active.
	(gnus-group-insert-group-line-info): Use simplified method.
	* gnus-srvr.el (gnus-browse-foreign-server): Use gnus-set-active.

2000-10-30 01:52:40  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-util.el (gnus-union): Renamed from gnus-agent-union, and
	moved here.
	* gnus-agent.el (gnus-agent-fetch-headers): Use it.
	* gnus-group.el (gnus-group-prepare-flat): Use it.
	* gnus-topic.el (gnus-group-prepare-topics): Use it.

2000-10-30 01:23:49  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-mode): Show menu in XEmacs.

2000-10-30 00:49:33  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-srvr.el (gnus-server-browse-in-group-buffer): New variable.
	(gnus-server-read-server-in-server-buffer): New function.
	(gnus-browse-foreign-server): Browse in group buffer.
	* gnus-group.el (gnus-group-prepare-flat): List group not in list.
	(gnus-group-prepare-flat-list-dead): Use gnus-group-insert-group-line.
	* gnus-topic.el (gnus-group-prepare-topics): Ditto.
	* gnus.el (gnus-server-browse-hashtb): New variable.

2000-10-29 22:31:40  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnfolder.el (nnfolder-open-nov): Use group.

2000-10-29 17:23:15  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnfolder.el: Add NOV. Set version to 2.0.
	(nnfolder-nov-is-evil): If non-nil, nnfolder acts like 1.0.

2000-10-29 10:35:08  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-mailcrypt-sign): Use mc-sign-generic.

2000-10-29 09:42:05  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-srvr.el (gnus-browse-foreign-server): Show level mark.
	(gnus-browse-unsubscribe-group): Unsubscribed is not killed.

2000-10-29 08:28:58  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnfolder.el (nnfolder-read-folder): Don't goto point-min.

2000-10-28 19:11:01  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-verify-function-alist): New variable.
	(mm-verify-option): New variable.
	(mm-decrypt-function-alist): Ditto.
	(mm-decrypt-option): Ditto.
	(mm-find-raw-part-by-type): New function.
	(mm-possibly-verify-or-decrypt): New function.
	(mm-dissect-multipart): Use it.
	* mml2015.el (mml2015-fix-micalg): New function.
	(mml2015-decrypt): Use new interface.
	(mml2015-verify):  Use new interface.
	(mml2015-setup): Make it bogus.

2000-10-28 16:54:45  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-generate-mime-postprocess-function): Set to
	mml-postprocess.
	(autoload): Autoload mml2015 and mml-smime.
	(mml-postprocess-alist): Use mml2015-sign and mml2015-encrypt.
	* mml2015.el (mml2015-encrypt): New function.
	(mml2015-sign): New function.
	(mml2015-encrypt-function): New variable.
	(mml2015-sign-function): New variable.
	(mml2015-mailcrypt-encrypt): Use message-recipients.
	(mml2015-setup): Don't set mml-generate-mime-postprocess-function.
	* mml-smime.el (mml-smime-setup): Ditto.

2000-10-28  Simon Josefsson  <sj@extundo.com>

	* imap.el (imap-parse-resp-text-code): Workaround bug in Stalker
	Communigate Pro 3.3.1 server.

	* mml-sec.el (mml-smime-encrypt-buffer): Support certfiles stored
	in buffers.
	(mml-secure-dns-server): Removed.
	(mml-secure-part-smime-encrypt-by-dns): Use DIG interface.  Don't
	write certificates to files.

	* smime.el (smime-dns-server): New variable.
	(smime-mail-to-domain):
	(smime-cert-by-dns): New functions.

	* dig.el: New file.

2000-10-28 10:09:41  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* message.el (message-options): New variable.
	(message-options-set-recipient): New function.
	(message-send): Use them.
	* gnus-int.el (gnus-request-replace-article): Use them.
	(gnus-request-accept-article): Ditto.
	* mml.el (mml-preview): Use them.
	* gnus-sum.el (gnus-summary-edit-article): Use them.
	
	* message.el (message-options-get): New function.
	(message-options-get): New function.
	* rfc2047.el (rfc2047-encode-message-header): Use them.
	* mm-bodies.el (mm-encode-body): Use them.

2000-10-28  Simon Josefsson  <sj@extundo.com>

	* nnimap.el (nnimap-retrieve-which-headers): 
	(nnimap-request-article-part): Quote message-id.

	* smime.el (smime-CA-directory): Rename from `smime-CAs'.
	(smime-CA-file): New variable.
	(smime-call-openssl-region): Don't error.
	(smime-sign-region): Return result value.
	(smime-encrypt-region): Ditto.
	(smime-verify-region): New function.
	(smime-decrypt-region): Ditto.
	(smime-verify-buffer): Ditto.
	(smime-decrypt-buffer): Ditto.

	* mml.el: Require mml-sec.
	(mml-generate-mime-1): Support "sign" and "encrypt" MML tags.
	(mml-mode-map): Add "sign" and "encrypt" maps.
	(mml-menu): Add security menu.
	(mml-preview): Use generate-new-buffer.

	* mml-sec.el: New file.

2000-10-28 03:43:03  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-find-part-by-type): Move it here.
	* mml.el (mml-postprocess): Move it here.
	(mml-postprocess-alist): Move it here. Merge them.

2000-10-28 03:38:39  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* rfc2047.el (rfc2047-encode-message-header): Make sure no
	unencoded stuff in the header.

2000-10-28 02:40:46  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-group.el (gnus-group-listed-groups): New variable.
	(gnus-group-list-option): New variable.
	(gnus-group-list-limit-map): New keymap.
	(gnus-group-list-flush-map): New keymap.
	(gnus-group-list-plus-map): New keymap.
	(gnus-group-prepare-logic): New function.
	(gnus-group-prepare-flat): Merge with
	gnus-group-prepare-flat-predicate. Use gnus-group-listed-groups.
	(gnus-group-prepare-flat-list-dead): Ditto.
	(gnus-group-list-matching): Use gnus-group-prepare-function.
	(gnus-group-list-dormant): Ditto.
	(gnus-group-list-cached): Ditto.
	(gnus-group-listed-groups): New function.
	(gnus-group-list-limit): New function.
	(gnus-group-list-flush): New function.
	(gnus-group-list-plus): New function.
	* gnus-topic.el (gnus-group-prepare-topics): Accept predicate.
	(gnus-topic-prepare-topic): Ditto.

2000-10-27  Paul Jarc <prj@po.cwru.edu>

	* message.el (message-insert-to, message-get-reply-headers):
	(message-reply, message-followup): Mail-{Followup,Reply}-To.

2000-10-27 19:45:58  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el: New file.
	* smime.el: New file.
	* mml-smime.el: New file.

2000-10-27 19:42:12  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* ChangeLog: Moved to ChangeLog.1.

;; Local Variables:
;; coding: iso-2022-7bit
;; End:

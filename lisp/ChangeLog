2004-10-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-check-reasonable-setup): Use fboundp instead
	of boundp to check if display-warning is available.

2004-10-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-open-connection): fixed prog1/prog2 bug

2004-10-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnspool.el (nnspool-spool-directory): Use news-path if the
	news-directory variable is not bound.

	* gnus-start.el (gnus-check-reasonable-setup): Use an alternative
	function instead of display-warning if it is not available.

2004-10-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-agent.el (gnus-agent-expire-group-1): Fix last merge from
	v5-10: Use `point-at-bol'.

2004-10-26  Simon Josefsson  <jas@extundo.com>

	* hashcash.el: Fix URL in comment, reported by Cheng Gao
	<chenggao@gmail.com>.

>>>>>>> 7.511
2004-10-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* html2text.el (html2text-buffer-head): Removed.  Use `goto-char'
	instead.

2004-10-25  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-remove-server-from-buffer-alist): new function
	to remove a server from the nnimap-server-buffer-alist
	(nnimap-open-connection, nnimap-close-server): use it

	* gnus-encrypt.el: removed in favor of encrypt.el

2004-10-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-display-inline-fontify): Inhibit font-lock when
	running the major-mode function.

2004-10-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-update-summary-mark-positions): Search for
	dummy marks in the right way.

2004-10-18  David Edmondson  <dme@dme.org>

	* mm-view.el (mm-w3m-cid-retrieve-1): Don't use recursive call
	excessively.

2004-10-18  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-util.el (gnus-split-references): accept a nil references
	string and go on blissfully

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): catch
	cases where the references string is non-nil but has no references

	* encrypt.el: add autoload tags

	* spam.el (spam-resolve-registrations-routine): remove article
	from unregistration list too.  Reported by David Hanak
	<dhanak@isis.vanderbilt.edu>

2004-10-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-copy-article-ignored-headers): Default to
	nil.  Changed custom type.

2004-10-17  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-copy-article-ignored-headers): New variable.

	* gnus-sum.el (gnus-summary-move-article): Use it.

2004-10-15  Teodor Zlatanov  <tzz@lifelogs.com>

	* encrypt.el: add autoload cookies

	* spam.el (spam-backend-article-list-property)
	(spam-backend-get-article-todo-list)
	(spam-backend-put-article-todo-list, )
	(spam-summary-prepare-exit, spam-resolve-registrations-routine):
	resolve registrations separately
	(spam-register-routine): format comments
	(spam-unregister-routine, spam-register-routine): always call with
	specific-articles, no default list
	(spam-summary-prepare-exit): use the spam-classifications function

	* netrc.el (autoload, netrc-parse): use encrypt.el instead of
	gnus-encrypt.el

	* encrypt.el: copied from gnus-encrypt.el

	* gnus-encrypt.el: commented that it's obsolete

2004-10-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-adaptive-pretty-print): New variable.
	(gnus-score-save): Use it.

	* message.el (message-bury): Use `window-dedicated-p'.

2004-10-15  Simon Josefsson  <jas@extundo.com>

	* pop3.el (top-level): Don't require nnheader.
	(pop3-read-timeout): Add.
	(pop3-accept-process-output): Add.
	(pop3-read-response, pop3-retr): Use it.

2004-10-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-register-routine): move comment
	(spam-verify-bogofilter): we use 'unknown for the initial
	spam-bogofilter-valid state, not 'never

	* netrc.el (netrc-machine-user-or-password): convenience wrapper
	for netrc-machine

	* nnimap.el (nnimap-open-connection): use
	netrc-machine-user-or-password

2004-10-17  Richard M. Stallman  <rms@gnu.org>

	* gnus-registry.el (gnus-registry-unload-hook): 
	Set as a variable with add-hook.

	* nnspool.el (nnspool-spool-directory): Use news-directory instead
	of news-path.

	* spam-stat.el (spam-stat-unload-hook): Set as a variable w/ add-hook.

	* spam.el: Delete duplicate `provide'.
	(spam-unload-hook): Set as a variable with add-hook.

2004-10-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* pop3.el (pop3-leave-mail-on-server): Describe possible problems
	in the doc string.

	* message.el (message-ignored-news-headers)
	(message-ignored-supersedes-headers)
	(message-ignored-resent-headers)
	(message-forward-ignored-headers): Improve custom type.

2004-10-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-tokenize-header): Fix 2004-09-06 change
	which used point-min in the wrong place.

2004-10-12  Simon Josefsson  <jas@extundo.com>

	* net/tls.el (tls-certtool-program): New variable.
	(tls-certificate-information): New function, based on
	ssl-certificate-information.

2004-10-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* compface.el: Move the version of ELisp-based uncompface program
	to the contrib directory because of the copyright problem.

2004-10-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-kill-buffer): Raise the current frame.

2004-10-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el: Mention that multibyte characters don't work as marks.

	* gnus.el (message-y-or-n-p): Autoload.

	* pop3.el (pop3-maildrop, pop3-mailhost, pop3-port)
	(pop3-password-required, pop3-authentication-scheme)
	(pop3-leave-mail-on-server): Made customizable.
	(pop3): New custom group.
	(pop3-retr): Remove `sleep-for' statements.
	Suggested by Dave Love <fx@gnu.org>.

	* nnheader.el (nnheader-read-timeout): Explain 1.0 timeout for
	Windows/DOS.

	* imap.el (imap-parse-flag-list, imap-parse-body-extension)
	(imap-parse-body): Fix incorrect use of `assert'.  Suggested by
	Dave Love <fx@gnu.org>.

	* mml.el (mml-minibuffer-read-disposition): Require match.
	Suggested by Dave Love <fx@gnu.org>.

2004-10-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-delete-group): Change "\t." to "  " in
	doc string.

2004-10-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect-text-parts): Support all text/* types.

2004-10-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus-art.el (gnus-mime-display-single): Call `mm-display-inline'
	instead of calling `mm-insert-inline', to decode text/* parts
	before displaying them.

2004-10-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-text-plain-type): New variable.
	(mm-uu-pgp-signed-extract-1): Use it.
	(mm-uu-pgp-encrypted-extract-1): Use it.
	(mm-uu-dissect): Allow MIME type and parameters as an optional arg;
	bind mm-uu-text-plain-type with that value.
	(mm-uu-dissect-text-parts): Pass MIME type and parameters to
	mm-uu-dissect.

2004-10-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-update-group-mark-positions):
	* gnus-sum.el (gnus-update-summary-mark-positions):
	* message.el (message-check-news-body-syntax):
	* gnus-msg.el (gnus-debug): Use mm-string-as-multibyte instead
	of string-as-multibyte.

2004-10-05  Juri Linkov  <juri@jurta.org>

	* gnus-group.el (gnus-update-group-mark-positions):
	* gnus-sum.el (gnus-update-summary-mark-positions):
	* message.el (message-check-news-body-syntax):
	* gnus-msg.el (gnus-debug): Use `string-as-multibyte' to convert
	8-bit unibyte values to a multibyte string for search functions.

2004-10-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect): Allow optional arg.
	(mm-uu-dissect-text-parts): New function.

	* gnus-art.el (gnus-display-mime): Use mm-uu-dissect-text-parts to
	dissect text parts.

	* gnus-sum.el (gnus-summary-insert-subject): Remove redundant setq.
	(gnus-summary-force-verify-and-decrypt): Revert 2004-08-18 change.

	* mm-decode.el (mm-dissect-singlepart): Revert 2004-08-18 change.

	* gnus-topic.el (gnus-topic-hierarchical-parameters): Use
	gnus-current-topics instead of gnus-current-topic.

2004-10-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-show-article): Use with-current-buffer.

2004-10-05  Jesper Harder  <harder@ifa.au.dk>

	* nnsoup.el (nnsoup-read-active-file): Use dolist, mapc or last
	where approriate.

	* nnml.el (nnml-generate-active-info): do.

	* nndiary.el (nndiary-generate-active-info): do.

	* gnus-topic.el (gnus-topic-hierarchical-parameters): do.
	(gnus-topic-move): do.

	* gnus-sum.el (gnus-data-enter-list, gnus-summary-process-mark-set)
	(gnus-summary-set-local-parameters, gnus-summary-read-document): do.

	* gnus-srvr.el (gnus-server-prepare)
	(gnus-server-open-all-servers): do.

	* gnus-msg.el (gnus-summary-cancel-article)
	(gnus-summary-resend-message)
	(gnus-summary-mail-crosspost-complaint): do.

	* gnus-move.el (gnus-change-server): do.

	* gnus-group.el (gnus-group-unmark-all-groups)
	(gnus-group-set-current-level): do.

2004-10-04  Simon Josefsson  <jas@extundo.com>

	* message.el (message-generate-hashcash): Doc fix.

2004-10-02  Kevin Greiner  <kgreiner@compsol.cc>

	* nnagent.el (nnagent-request-type): Bind gnus-agent to nil to
	avoid infinite recursion via gnus-get-function.

2004-10-02  Jesper Harder  <harder@ifa.au.dk>

	* mm-partial.el (mm-partial-find-parts): Use with-current-buffer.

	* nnfolder.el (nnfolder-generate-active-file): Use dolist.

	* nnmail.el (nnmail-split-history): do.

	* nnml.el (nnml-generate-nov-databases-1, nnml-request-rename-group)
	(nnml-request-delete-group): do.

	* nnslashdot.el (nnslashdot-read-groups): do.

	* nnsoup.el (nnsoup-delete-unreferenced-message-files): do.
	(nnsoup-unpack-packets, nnsoup-make-active): Simplify.

	* nnspool.el (nnspool-find-id): Use with-temp-buffer.
	(nnspool-sift-nov-with-sed): Use last
	(nnspool-retrieve-headers-with-nov): Use mapc.
	(nnspool-request-newgroups): Use dolist.
	(nnspool-request-group): Use last.

	* nntp.el (nntp-read-server-type): Use dolist.

	* nnvirtual.el (nnvirtual-create-mapping)
	(nnvirtual-update-read-and-marked): Use dolist.
	(nnvirtual-convert-headers): Simplify.

2004-10-01  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-group-flags): Added
	support for sync'ing tick marks.

2004-10-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-toggle-header): Make it work even if
	there's no visible header.

2004-10-01  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-group-flags): When
	necessary, pass full group name to gnus-request-set-marks.
	
2004-10-01  Simon Josefsson  <jas@extundo.com>

	* mailcap.el (mailcap-mime-data): Add pdf.  Remove non-free
	acroread.

2004-10-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam-report.el (spam-report-gmane): Fix interactive.

	* gnus-art.el (gnus-treat-body-boundary): Only do stuff under X. 

	* gnus-agent.el (gnus-agent-synchronize-flags-server): Be silent
	when writing file.
	(gnus-agent-synchronize-flags): Don't default to being
	interactive. 

2004-09-30  Simon Josefsson  <jas@extundo.com>

	* message.el (message-generate-hashcash): Add.
	(message-send-mail): Use it, call mail-add-payment.

2004-09-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-verify-bogofilter): -V, not -sV option

2004-09-28  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-group-flags): Replaced
	gnus-requst-update-info with explicit code to sync the in-memory
	info read flags with the marks being sync'd to the backend.

	*gnus-util.el (gnus-pp): Added optional stream to match pp API.
	
2004-09-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-verify-bogofilter): new function
	(spam-check-bogofilter)
	(spam-bogofilter-register-with-bogofilter): use it
	(spam-verify-bogofilter): small fixes

2004-09-28  Simon Josefsson  <jas@extundo.com>

	* hashcash.el (hashcash-generate-payment): Revert.

2004-09-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): use
	gnus-extract-references instead of gnus-split-references

	* gnus-util.el (gnus-extract-references): new function, analogous
	to gnus-split-references but extracts only the message-ID without
	anything extra

	* hashcash.el (hashcash-generate-payment)
	(hashcash-check-payment): do the right thing if hashcash-path is
	nil (because the hashcash program could not be found)

	* spam.el (spam-use-hashcash): remove comment

2004-09-27  Jesper Harder  <harder@ifa.au.dk>

	* gnus-cache.el (gnus-cache-possibly-remove-articles-1)
	(gnus-cache-enter-article, gnus-cache-remove-article)
	(gnus-cache-braid-heads, gnus-cache-generate-active): Use dolist.

	* gnus-async.el (gnus-async-prefetch-remove-group): do.

	* gnus-art.el (article-hide-boring-headers)
	(article-translate-strings, article-display-face)
	(gnus-article-mime-match-handle-first)
	(gnus-article-highlight-headers)
	(gnus-article-add-buttons-to-head): do.

2004-09-27  Simon Josefsson  <jas@extundo.com>

	* hashcash.el: New version, from
	http://users.actrix.co.nz/mycroft/hashcash.el.  Previously in
	../contrib/.

2004-09-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-copy-to-buffer): Don't use set-buffer-multibyte.

2004-09-26  Jesper Harder  <harder@ifa.au.dk>

	* gnus-dup.el (gnus-dup-open): Use mapc.
	(gnus-dup-enter-articles, gnus-dup-suppress-articles): Use dolist.
	
	(gnus-dup-enter-articles): Remove excess ID's from gnus-dup-hashtb.
	Reported by Stefan Wiens <s.wi@gmx.net>.

	* gnus.el (gnus-shutdown): Use dolist.

	* gnus-undo.el (gnus-undo): Use mapc.

	* nnrss.el (nnrss-generate-active): do.

	* message.el (message-cite-original-without-signature)
	(message-cite-original): Use mapc.
	(message-do-actions, message-make-forward-subject): Use dolist.

2004-09-25  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-check-overview-buffer): Fixed range of
	deletion to remove entire duplicate line.  Fixes merged article
	number bug.
	
2004-09-25  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-possibly-synchronize-flags): Ignore
	servers that are offline.  Avoids having gnus-agent-toggle-plugged
	first ask if you want to open a server and then, even when you
	responded with no, asking if you want to synchronize the server's
	flags.
	(gnus-agent-synchronize-flags-server): Rewrote read loop to handle
	multi-line expressions.
	(gnus-agent-synchronize-group-flags): New internal function.
	Updates marks in memory (in the info structure) AND in the
	backend.

	* gnus-util.el (gnus-remassoc): Fixed typo in documentation.

	* nnagent.el (nnagent-request-set-mark): Use
	gnus-agent-synchronize-group-flags, not backend's request-set-mark
	method, to ensure that synchronization updates marks in the
	backend and in the info (in memory) structure.
	
2004-09-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-uu.el (gnus-uu-digest-mail-forward): Obey the process/prefix
	convention fully; don't miss the root article of a thread; make
	the X-Draft-From header with correct article numbers.

2004-09-23  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-flags-server): Do nothing
	unless plugged.  Disable the agent so that an open failure causes
	an error.

	* gnus-int.el (gnus-request-set-mark, gnus-request-update-mark):
	Reverted 2004-09-21 change.  The backend must be opened while
	synchronizing flags even when the backend stores the flags
	locally.

2004-09-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-configure-posting-styles): Narrow to headers
	in `header' match.  Reported by Svend Tollak Munkejord.

	* message.el (message-cite-original): Fix use of
	`message-cite-articles-with-x-no-archive'.

2004-09-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-win.el (gnus-buffer-configuration): Add mml-preview.
	(gnus-window-to-buffer): Ditto.

	* mml.el (mml-preview-buffer): New variable.
	(mml-preview): Manage window layout with gnus-buffer-configuration.

	* gnus-msg.el (gnus-setup-message): Put article numbers into the
	X-Draft-From header even if those articles aren't quoted.

2004-09-21  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-int.el (gnus-servers-that-use-local-marks): New variable.
	(gnus-request-set-mark, gnus-request-update-mark): Use new
	g-s-t-u-l-m to decide to use backend even when unplugged.

2004-09-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-inews-make-draft-meta-information): Don't add
	a trailing whitespace.  Suggested by Cheng Gao <chenggao@gmail.com>.

2004-09-20  Simon Josefsson  <jas@extundo.com>

	* mm-util.el (mm-charset-synonym-alist): Map "unicode" to
	"utf-16-le".

2004-09-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-decode.el (mm-copy-to-buffer): Preserve the data's unibyteness.

2004-09-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* uudecode.el (uudecode-use-external): Add :version.

	* smime.el (smime-CA-file, smime-encrypt-cipher)
	(smime-dns-server): Add :version.

	* smiley.el (gnus-smiley-file-types): Add :version.

	* sha1.el (sha1-use-external): Add :version.

	* pgg-def.el (pgg-query-keyserver): Add :version.

	* nnmail.el (nnmail-fancy-expiry-targets)
	(nnmail-mail-splitting-charset, nnmail-mail-splitting-decodes):

	* nnimap.el (nnimap-split-download-body, nnimap-dont-close)
	(nnimap-retrieve-groups-asynchronous): Add :version.
	(nnimap-close-asynchronous): Add :version.  Fixed typo in doc string.

	* mml.el (mml-content-disposition-parameters)
	(mml-insert-mime-headers-always): Add :version.

	* mm-util.el (mm-coding-system-priorities):

	* mm-decode.el (mm-inline-text-html-with-images)
	(mm-keep-viewer-alive-types, mm-external-terminal-program)
	(mm-verify-option): Add :version.
	(mm-text-html-renderer): Change :version.

	* message.el (message-fcc-externalize-attachments)
	(message-required-headers, message-draft-headers)
	(message-subject-trailing-was-query)
	(message-subject-trailing-was-ask-regexp)
	(message-subject-trailing-was-regexp, message-mark-insert-begin)
	(message-mark-insert-end, message-archive-header)
	(message-archive-note, message-cross-post-default)
	(message-cross-post-note, message-followup-to-note)
	(message-cross-post-note-function, message-use-mail-followup-to)
	(message-subscribed-address-functions)
	(message-subscribed-address-file, message-subscribed-addresses)
	(message-subscribed-regexps, message-allow-no-recipients)
	(message-yank-cited-prefix, message-signature-insert-empty-line)
	(message-hidden-headers, message-hierarchical-addresses)
	(message-mail-user-agent, message-use-idna)
	(message-valid-fqdn-regexp)
	(message-strip-special-text-properties, message-header-synonyms)
	(message-beginning-of-line, message-tab-body-function): Add :version.
	(message-insert-canlock, message-wide-reply-confirm-recipients):
	Change :version.

	* mail-source.el (mail-source-ignore-errors): Add :group, :type
	and :version.
	(mail-source-delete-old-incoming-confirm)
	(mail-source-movemail-program): Add :version.

	* gnus.el (gnus-parameters, gnus-user-agent): Add :version.
	(gnus-agent-cache, gnus-agent): Change :version.

	* gnus-util.el (gnus-use-byte-compile): Change :version.

	* gnus-sum.el (gnus-summary-make-false-root-always)
	(gnus-summary-default-high-score)
	(gnus-summary-default-low-score, gnus-auto-goto-ignores)
	(gnus-forwarded-mark, gnus-unseen-mark, gnus-no-mark)
	(gnus-read-all-available-headers, gnus-article-emulate-mime)
	(gnus-sum-thread-tree-root, gnus-sum-thread-tree-false-root)
	(gnus-sum-thread-tree-single-indent)
	(gnus-sum-thread-tree-vertical, gnus-sum-thread-tree-indent)
	(gnus-sum-thread-tree-leaf-with-other)
	(gnus-sum-thread-tree-single-leaf): Add :version.
	(gnus-summary-display-arrow, gnus-summary-muttprint-program)
	(gnus-article-loose-mime): Change :version.

	* gnus-start.el (gnus-backup-startup-file)
	(gnus-save-startup-file-via-temp-buffer): Add :version.

	* gnus-srvr.el (gnus-server-browse-in-group-buffer)
	(gnus-server-offline-face): Add :version.

	* gnus-score.el (gnus-adaptive-word-length-limit):

	* gnus-msg.el (gnus-gcc-externalize-attachments)
	(gnus-debug-files, gnus-debug-exclude-variables)
	(gnus-discouraged-post-methods): Change :version.
	(gnus-confirm-mail-reply-to-news)
	(gnus-confirm-treat-mail-like-news): Add :version.

	* gnus-int.el (gnus-server-unopen-status): Add :version.

	* gnus-group.el (gnus-group-jump-to-group-prompt)
	(gnus-large-ephemeral-newsgroup)
	(gnus-fetch-old-ephemeral-headers): Add :version.

	* gnus-fun.el (gnus-x-face-directory)
	(gnus-convert-pbm-to-x-face-command)
	(gnus-convert-image-to-x-face-command)
	(gnus-convert-image-to-face-command): Add :version.

	* gnus-delay.el (gnus-delay-default-hour): Add :version.

	* gnus-cite.el (gnus-cite-blank-line-after-header)
	(gnus-article-boring-faces): 

	* gnus-art.el (gnus-buttonized-mime-types)
	(gnus-inhibit-mime-unbuttonizing)
	(gnus-treat-display-face)
	(gnus-treat-body-boundary): Change :version.
	(gnus-body-boundary-delimiter, gnus-picon-databases)
	(gnus-treat-strip-cr, gnus-treat-leading-whitespace)
	(gnus-treat-date-english, gnus-treat-fold-headers)
	(gnus-article-skip-boring, gnus-treat-fold-newsgroups)
	(gnus-treat-mail-picon, gnus-treat-wash-html)
	(gnus-article-encrypt-protocol)
	(gnus-use-idna, gnus-article-over-scroll)
	(gnus-mime-display-multipart-alternative-as-mixed)
	(gnus-mime-display-multipart-related-as-mixed)
	(gnus-button-valid-fqdn-regexp, gnus-button-man-handler)
	(gnus-ctan-url, gnus-button-ctan-handler)
	(gnus-button-handle-ctan-bogus-regexp)
	(gnus-button-ctan-directory-regexp)
	(gnus-button-mid-or-mail-regexp, gnus-button-prefer-mid-or-mail)
	(gnus-button-mid-or-mail-heuristic-alist, gnus-button-tex-level)
	(gnus-button-man-level, gnus-button-emacs-level)
	(gnus-button-message-level, gnus-button-browse-level): Add :version.

	* gnus-agent.el (gnus-agent-fetched-hook): Add :version.
	(gnus-agent-go-online): Change :version.
	(gnus-agent-expire-unagentized-dirs)
	(gnus-agent-auto-agentize-methods): Add :version.

	* flow-fill.el (fill-flowed-display-column)
	(fill-flowed-encode-column): Add :version.

	* deuglify.el (gnus-outlook-deuglify-unwrap-min)
	(gnus-outlook-deuglify-unwrap-max)
	(gnus-outlook-deuglify-cite-marks)
	(gnus-outlook-deuglify-unwrap-stop-chars)
	(gnus-outlook-deuglify-no-wrap-chars)
	(gnus-outlook-deuglify-attrib-cut-regexp)
	(gnus-outlook-deuglify-attrib-verb-regexp)
	(gnus-outlook-deuglify-attrib-end-regexp)
	(gnus-outlook-display-hook): Add :version.

	* binhex.el (binhex-use-external): Add :version.

2004-09-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-fetch-old-headers): Add custom choices `t'
	and `invisible'.

2004-09-10  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-trim): watch out for negatives
	in gnus-registry-trim

2004-09-13  Simon Josefsson  <jas@extundo.com>

	* dns-mode.el: Add XEmacs auto-mode-alist autoload cookie.

	* nnimap.el (nnimap-demule): Revert 2004-08-30 change.

	* dns-mode.el (dns-mode): Fix menu for XEmacs, reported by Steve
	Youngs <steve@youngs.au.com> and suggested by Katsumi Yamaoka
	<yamaoka@jpl.org>.
	(dns-mode-font-lock-keywords): Fix faces, reported by Steve Youngs
	<steve@youngs.au.com> and suggested by Katsumi Yamaoka
	<yamaoka@jpl.org>.

	* sieve.el (sieve-manage-mode): Ditto.

2004-09-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-copy-article): Fix doc string.

2004-09-11  Simon Josefsson  <jas@extundo.com>

	* dns-mode.el: Add.

	* mm-view.el (mm-display-dns-inline): Add.

	* mm-decode.el (mm-inline-media-tests): Add text/dns.
	(mm-automatic-display): Ditto.

	* mailcap.el (mailcap-mime-data): Add text/dns.
	(mailcap-mime-extensions): Map .soa to text/dns.

2004-09-10  Miles Bader  <miles@gnu.ai.mit.edu>

	* gnus-art.el (article-decode-mime-words, article-babel)
	(gnus-article-highlight-signature, gnus-article-add-buttons)
	(gnus-signature-toggle): Remove unnecessary bindings of
	`inhibit-read-only' inherited from v5.10 merge.

2004-09-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* nntp.el (nntp): New customization group.
	(nntp-authinfo-file): Add customization group.

	* mml2015.el (mml2015-unabbrev-trust-alist): Add customization group.

	* mml-sec.el (mml-signencrypt-style-alist): Ditto.

	* gnus.el (to-address, to-list, subscribed)
	(large-newsgroup-initial): Ditto.

	* flow-fill.el (fill-flowed-display-column)
	(fill-flowed-encode-column): Ditto.

2004-09-06  Stefan  <monnier@iro.umontreal.ca>

	* message.el (message-tokenize-header, message-send-mail-with-qmail):
	Use point-min rather than 1.
	(message-send-mail): Use buffer-size rather than point-max.

	* gnus-sum.el (gnus-summary-search-article-forward):
	Signal a specific `search-failed' rather than a generic `error'.

	* gnus-salt.el (gnus-pick-mouse-pick-region): Switch 1 => point-min.
	(gnus-generate-vertical-tree): Usue `bobp' rather than compare to 1.
	(gnus-highlight-selected-tree): Use point-min rather than 1 and 2.

2004-09-10  Simon Josefsson  <jas@extundo.com>

	* nndb.el (require): Remove tcp and duplicate cl.

2004-09-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (directory-files-and-attributes): Move forward.

2004-09-09  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (directory-files-and-attributes): Optionally
	defined to support XEmacs.

2004-09-09  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-cat-groups): rewrote avoiding defsetf
	to avoid run-time CL dependencies.
	(gnus-agent-unfetch-articles): New function.
	(gnus-agent-fetch-headers): Use gnus-agent-braid-nov to validate
	article numbers even when local .overview file is missing.
	(gnus-agent-read-article-number): New function. Only accepts
	27-bit article numbers.
	(gnus-agent-copy-nov-line, gnus-agent-uncached-articles): Use
	gnus-agent-read-article-number.
	(gnus-agent-braid-nov): Rewrote to validate article numbers coming
	from backend while recognizing that article numbers in .overview
	must be valid.
	(gnus-agent-update-files-total-fetched-for): Use
	directory-files-and-attributes to improve performance.
	* gnus-int.el (gnus-request-move-article): Use
	gnus-agent-unfetch-articles in place of gnus-agent-expire to
	improve performance.

	* gnus-start.el (gnus-convert-old-newsrc): Changed message text as
	some users confused by references to .newsrc when they only have a
	.newsrc.eld file.
	(gnus-convert-mark-converter-prompt,
	gnus-convert-converter-needs-prompt): Fixed use of property list.
	* legacy-gnus-agent.el (gnus-agent-convert-to-compressed-agentview-prompt):
	New function. Used internally to only display 'gnus converting
	files' message when actually necessary.

	* gnus-sum.el (): Removed (require 'gnus-agent) as required
	methods now autoloaded.

2004-09-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-insert-subject): Remove list
	identifiers.

2004-09-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-picon.el: Fix indentation and closing parenthesis.

2004-09-01  Simon Josefsson  <jas@extundo.com>

	* message.el (message-canlock-generate): Require sha1, not
	sha1-el.  (Can we get rid of this require alltogheter? It is ugly
	to require within a function.  Sadly, if sha1.el isn't loaded, the
	let binding in m-c-g will hide the defcustom definition, which is
	bad.)

	* canlock.el: Require sha1, not sha1-el.

	* message.el: Don't autoload sha1 (there is a autoload cookie in
	sha1.el).

	* sha1-el.el: Renamed to sha1.el.

2004-08-30  Juanma Barranquero  <lektu@terra.es>

	* ietf-drums.el (ietf-drums-remove-whitespace): Fix character constant.

2004-08-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* nnimap.el (nnimap-demule): Avoid string-as-multibyte.

2004-08-30  Kim F. Storm  <storm@cua.dk>

	* nntp.el (nntp-authinfo-file): Add :group 'nntp.

	* nnimap.el (nnimap-authinfo-file, nnimap-prune-cache):
	Add :group 'nnimap.

2004-08-30  Simon Josefsson  <jas@extundo.com>

	* rfc2231.el (rfc2231-parse-string): Restore whitespace syntax for
	?* and ?\; (tiny patch).  From Andreas Schwab <schwab@suse.de>.

2004-08-30  Simon Josefsson  <jas@extundo.com>

	* ietf-drums.el (ietf-drums-syntax-table): Set syntax of ?* ?\;
	and ?\' to symbol instead of whitespace (tiny patch).  From
	Andreas Schwab <schwab@suse.de>.

2004-08-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-restore-gcc): Use ^ and regexp-quote.

	* gnus-sum.el (gnus-summary-morse-message): Use search-forward
	instead of re-search-forward.

	* gnus-uu.el (gnus-uu-save-article): Ditto.
	(gnus-uu-post-encode-uuencode): Ditto.

	* html2text.el (html2text-clean-list-items): Ditto.
	(html2text-clean-dtdd): Ditto.
	(html2text-format-tags): Ditto.

	* message.el (message-send-mail-with-sendmail): Fix regexp.
	(message-fill-field-general): Use search-forward instead of
	re-search-forward.
	(unbold-region): Ditto.

	* nnrss.el (nnrss-request-article): Ditto.

	* nnslashdot.el (nnslashdot-request-article): Ditto.

	* nnweb.el (nnweb-gmane-wash-article): Ditto.

	* gnus-sum.el (gnus-summary-make-menu-bar): Avoid the
	"Unrecognized menu descriptor" error in XEmacs.

2004-08-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nndoc.el (nndoc-type-alist): Fix regexp in the rfc822-forward
	entry.

	* gnus-group.el (gnus-group-line-format-alist): Convert the value
	of gnus-tmp-news-method into string under XEmacs.  It will be
	passed to gnus-correct-length which takes only a string argument.

2004-08-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-bind-print-variables): New macro.
	(gnus-prin1): Use it.
	(gnus-prin1-to-string): Use it.
	(gnus-pp): New function.
	(gnus-pp-to-string): New function.

	* gnus-cus.el (gnus-agent-cat-prepare-category-field): Replace
	pp-to-string with gnus-pp-to-string.
	* gnus-eform.el (gnus-edit-form): Replace pp with gnus-pp.
	* gnus-group.el (gnus-group-make-kiboze-group): Ditto.
	* gnus-msg.el (gnus-debug): Ditto.
	* gnus-score.el (gnus-score-save): Ditto.
	* gnus-spec.el (gnus-update-format): Replace pp-to-string with
	gnus-pp-to-string.
	* legacy-gnus-agent.el (gnus-agent-unlist-expire-days): Replace pp
	with gnus-pp.
	* score-mode.el (gnus-score-pretty-print): Ditto.
	* webmail.el (webmail-debug): Ditto.

2004-08-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face, article-display-x-face): Use
	buffer-read-only.

2004-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-hide-list-identifiers): Bind
	inhibit-read-only as t.

2004-08-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-mlspl.el (gnus-group-split-update): Fix docstring.

2004-08-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el: Use inhibit-read-only instead of buffer-read-only.
	(gnus-narrow-to-page): Don't assume point-min == 1.
	(gnus-article-edit-mode): Derive from message-mode.

	* gnus-score.el (gnus-score-find-bnews): Simplify and don't assume
	point-min == 1.

	* imap.el (imap-parse-address-list, imap-parse-body-ext):
	Disable incorrect use of `assert'.

	* message.el (message-mode): Set comment-start-skip.


2004-08-22  Sam Steingold  <sds@gnu.org>

	* pop3.el (pop3-leave-mail-on-server): New user variable.
	(pop3-movemail): Delete mail only when it is nil.

2004-08-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* nntp.el (nntp-marks-is-evil): Fix typo in docstring.

	* mml.el (mml-preview): Use `pop-to-buffer'.

	* message.el (message-goto-mail-followup-to): Insert after "To".
	(message-carefully-insert-headers): Add comment.

	* gnus.el: Remove unused variable `gnus-article-check-size'.

	* gnus-sum.el (gnus-summary-make-menu-bar): Add help texts.

	* gnus-art.el (gnus-button-alist): Improve
	`gnus-button-handle-library' entry.

2004-08-19  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir--emlink-p, nnmaildir--enoent-p): Use
	downcase, since XEmacs capitalizes error messages differently.
	From Sebastian Freundt <hroptatyr@gna.org>.

2004-08-18  Jesper Harder  <harder@ifa.au.dk>

	* nntp.el: Add (require 'gnus) due to reference to
	`gnus-directory'.  Reported by Matt Swift <swift@alum.mit.edu>.

2004-08-18  Florian Weimer  <fw@deneb.enyo.de>

	* gnus-sum.el (gnus-summary-force-verify-and-decrypt): Bind
	`mm-fill-flowed'.

	* mm-decode.el (mm-dissect-singlepart): Check it.

2004-08-17  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-open-connection): add 'imaps' synonym to
	'imap' for netrc parsing

2004-08-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* mailcap.el (mailcap-mime-data): Mark as risky.

2004-08-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Assume the close parenthesis
	may be included in the encoded word.
	(rfc2047-encode): Don't append a space if the encoded word
	includes close parenthesis.

2004-08-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-1, rfc2047-encode): Improve encoding
	of text within parentheses.

2004-08-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-encrypt.el (gnus-encrypt-insert-file-contents)
	(gnus-encrypt-write-file-contents): the password key is the file
	name PLUS the cipher, not just the cipher.  Also remove failed
	passwords from the cache.

2004-08-06  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-article-loose-mime): Change default to t.  Doc
	fix.

2004-08-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-fold-region): Use trailing whitespace as
	LWSP.

2004-08-04  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): try
	to append in-reply-to: data to the references: header

	* netrc.el: removed old encryption support, autoload gnus-encrypt.el
	(netrc-parse): use gnus-encrypt.el functions

	* gnus-encrypt.el: new file for encryption support; currently
	does only a few GPG ciphers and an internal XOR cipher

	* password.el: add comments on using password-read-and-add
	(password-read-and-add): new function to read and add the
	password to the cache at once

2004-07-28  Simon Josefsson  <jas@extundo.com>

	* pgg-pgp5.el (pgg-pgp5-encrypt-region): Accept sign
	parameter (but don't use it, for now).

	* imap.el (imap-ssl-open): Use imap-process-connection-type,
	instead of hard coding to nil.

2004-07-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-image-emacs): Open lines under an image
	as mm-inline-image-xemacs does.

2004-07-26  Simon Josefsson  <jas@extundo.com>

	* gnus-group.el (gnus-group-group-map, gnus-group-make-menu-bar):
	Revert part of 2004-07-17 change below.

2004-07-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Don't infloop.  Suggested by
	Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

2004-07-25  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* flow-fill.el (fill-flowed): Remove space stuffing, and only do
	quotes that actually start with ">" at the beginning of the
	lines. 

2004-07-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Fix last change.
	(rfc2047-encode-parameter): Remove useless concat.

2004-07-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Check carefully whether to
	encode special characters; fix some kind of misconfigured headers;
	signal a real error if debug-on-quit or debug-on-error is non-nil.
	(rfc2047-encode-max-chars): New variable.
	(rfc2047-encode-1): Use it.
	(rfc2047-encode-parameter): New function.

	* mml.el (mml-insert-parameter): Remove an excessive space.

2004-07-17  Simon Josefsson  <jas@extundo.com>

	* gnus-group.el (gnus-group-make-group-simple): Add, suggested by
	Kai Grossjohann <kai@emptydomain.de>.
	(gnus-group-group-map): Use it, instead of gnus-group-make-group.
	(gnus-group-make-menu-bar): Ditto.

	* gnus-util.el (gnus-group-server): Add.

2004-07-16  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-clone-locals): Clone sendmail and smtp
	variables.

2004-07-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Fix last change.

2004-07-12  Katsumi Yamaoka  <yamaoka@jpl.org>
	From David Hedbor <dhedbor@real.com>.

	* nnmail.el (nnmail-split-lowercase-expanded): New user option.
	(nnmail-expand-newtext): Lowercase expanded entries if
	nnmail-split-lowercase-expanded is non-nil.

2004-07-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Treat backslash-quoted
	characters as non-special.

2004-07-09  Simon Josefsson  <jas@extundo.com>

	* gnus-agent.el (gnus-agent-synchronize-flags): Revert to ask.
	Users will lose all flag changes made while unplugged with
	e.g. nntp unless flag synchronization happens, thus `nil' is not a
	good default.  See numerous reports on ding mailing list.

2004-07-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nndoc.el (nndoc-type-alist): Improve regexp for article-begin,
	add generate-head-function and generate-article-function to the
	rfc822-forward entry.
	(nndoc-rfc822-forward-generate-article): New function.
	(nndoc-rfc822-forward-generate-head): New function.

	* mm-decode.el (mm-dissect-buffer): Simplify cleaning of CTE.

2004-07-06  Dan Christensen  <jdc@uwo.ca>

	* gnus-sum.el (gnus-summary-read-group-1): When summary
	is unthreaded, respect display group parameter.
	(gnus-articles-to-read): Remove unused reference to
	display group parameter.

2004-07-03  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnheader.el (nnheader-uniquify-message-id): New experimental
	variable. 
	(nnheader-nov-read-message-id): Use it.

	* spam-report.el (spam-report-gmane): Add interactive.

2004-07-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-encode.el (mm-content-transfer-encoding-defaults): Use
	qp-or-base64 for the application/* types.

2004-07-02  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-read-group-data): Fix off-by-one error.  From
	Joakim Verona <joakim@verona.se>.

2004-06-30  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-trim): don't allow a negative
	trim value

2004-01-25  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir--condcase, nnmaildir--enoent-p):
	New macro and function.
	(nnmaildir--new-number, nnmaildir-request-set-mark): Use them.

2004-06-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-enrich-utf-8-by-mule-ucs): Fix cleaning of
	after-load-alist.

2004-06-29  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-group-get-new-news-this-group): Don't
	update info that isn't there.

2004-06-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-render-with-function): Use multibyte
	buffer; decode html source by charset.

	* mm-encode.el (mm-content-transfer-encoding-defaults): Doc fix.

	* mm-util.el (mm-mime-mule-charset-alist): Add the windows-1251
	entry.  From Ilya N. Golubev <gin@mo.msk.ru>.
	(mm-enrich-utf-8-by-mule-ucs): New function run when Mule-UCS is
	loaded under XEmacs.
	(): Don't make duplicated entries in mm-mime-mule-charset-alist.

2004-06-28  Jesper Harder  <harder@ifa.au.dk>

	* nnheader.el (nnheader-max-head-length): Increase to 8192.

2004-06-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-coding-system-p): Return a coding-system.
	(mm-mime-mule-charset-alist): Use shift_jis instead of
	iso-2022-jp-2 for the katakana-jisx0201 mule charset; add new
	entries for the mime charsets iso-2022-jp-3 and shift_jis.
	(mm-coding-system-priorities): Use shift_jis and iso-8859-1
	instead of japanese-shift-jis and iso-latin-1 respectively in
	order to share the default value with both Emacs and XEmacs-mule.
	(mm-mule-charset-to-mime-charset): Make
	mm-coding-system-priorities effective.
	(mm-sort-coding-systems-predicate): Canonicalize coding-systems
	while predicating of candidates upon the priorities.

2004-06-27  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-make-menu-bar): Add
	gnus-uu-invert-processable.

	* gnus.el: Autoload gnus-uu-invert-processable.

2004-06-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-with-multibyte-buffer): New macro.

	* rfc2047.el (rfc2047-encode-string): Use it.
	(rfc2047-encode-region): Move point to the end of the region after
	encoding.  Suggested by IRIE Tetsuya <irie@t.email.ne.jp>.

2004-06-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-cite-parse): Don't ignore case when finding
	">From ".  Thanks to Reiner Steib <Reiner.Steib@gmx.de>.

2004-06-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-cite-ignore-quoted-from): New user option.
	(gnus-cite-parse): Ignore quoted envelope From_.  Suggested by
	Karl Chen <quarl@nospam.quarl.org>.

2004-06-23  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-idna-to-ascii-rhs-1): Don't choke on
	invalid addresses.

2004-06-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el: section markers changed, TODO list revised
	(spam-backends): new master list of all installed backends
	(spam-summary-exit-behavior): new variable to determine how
	messages moves are done at summary exit
	(spam-move-spam-nonspam-groups-only)
	(spam-process-ham-in-nonham-groups)
	(spam-process-ham-in-spam-groups): variables removed, the
	spam-summary-exit-behavior variable should be used to manage this
	behavior
	(spam-old-ham-articles, spam-old-spam-articles): removed
	(spam-old-articles): new variable, replacing spam-old-ham-articles
	and spam-old-spam-articles
	(spam-use-copy, spam-use-move, spam-use-gmane, spam-use-resend):
	empty variables, placeholders for the backends they represent
	(spam-set-difference): moved, unchanged
	(spam-list-of-processors): variable OBSOLETE, not used anymore
	unless the user has a processor variable
	(spam-classifications, spam-classification-valid-p)
	(spam-backend-properties, spam-backend-property-valid-p)
	(spam-backend-function-type-valid-p)
	(spam-process-type-valid-p, spam-list-articles): helper functions
	(spam-report-articles-gmane, spam-report-articles-resend):
	functions removed, they are not needed
	(spam-install-backend-super, spam-backend-list)
	(spam-backend-check, spam-backend-valid-p, spam-backend-info)
	(spam-backend-function, spam-backend-ham-registration-function)
	(spam-backend-spam-registration-function)
	(spam-backend-ham-unregistration-function)
	(spam-backend-spam-unregistration-function)
	(spam-backend-statistical-p, spam-backend-mover-p)
	(spam-install-backend-alias, spam-install-checkonly-backend)
	(spam-install-mover-backend, spam-install-nocheck-backend)
	(spam-install-backend, spam-install-statistical-backend)
	(spam-install-statistical-checkonly-backend): backend installation
	support
	(spam-summary-prepare-exit): rewritten to use the new backend code
	(spam-group-processor-p): use the new backend code and respect the
	summary exit behavior
	(spam-mark-spam-as-expired-and-move-routine): removed
	(spam-summary-prepare): changed to use the new spam-old-articles
	variable
	(spam-copy-or-move-routine, spam-copy-spam-routine)
	(spam-move-spam-routine, spam-copy-ham-routine)
	(spam-move-ham-routine): new code to copy/move ham or spam
	(spam-fetch-field-fast): doc and code improved, plus it allows the
	'number request
	(spam-list-of-checks, spam-list-of-statistical-checks): variables
	removed, no longer used
	(spam-split, spam-find-spam): use the new backend code
	(spam-registration-functions): variable removed, no longer used
	(spam-unregister-routine): convenience wrapper
	(spam-log-undo-registration, spam-register-routine)
	(spam-log-processing-to-registry)
	(spam-log-unregistration-needed-p): renamed "check" to "backend"
	where possible
	(spam-check-gmane-xref, spam-check-regex-headers)
	(spam-check-blackholes, spam-check-stat, spam-check-ifile, spam-check-BBDB)
	(spam-check-whitelist, spam-check-blacklist)
	(spam-check-bogofilter-headers, spam-check-spamoracle)
	(spam-check-spamassassin-headers, spam-check-bsfilter-headers)
	(spam-check-crm114-headers): use the spam-split-group that
	spam-split prepares, no need to determine it every time

	* nnimap.el (nnimap-retrieve-headers-progress): add the message number to
	the nnheader-parse-naked-head call

	* nnheader.el (nnheader-generate-fake-message-id): fix indentation

	* gnus-sum.el (gnus-nov-parse-line): add the message number to
	the nnheader-nov-read-message-id call

2004-06-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-get-new-news-this-group): Don't call
	gnus-activate-group twice.  Suggested by Markus Peter
	<warp@spin.de>.

2004-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-time-format): Exchange the order of
	day and month in the default value; fix customization type.
	(article-date-ut): Use add-text-properties.
	(article-make-date-line): Use message-make-date instead of
	current-time-string.

	* message.el (message-fetch-field): Don't use set-text-properties.
	(message-make-date): Simplify.

	* messagexmas.el (message-xmas-make-date): New function.
	(message-xmas-redefine): Defalias message-make-date to it.

2004-06-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-syntax-table): Treat `(' and `)' as is.
	(rfc2047-encode-region): Treat text within parentheses as special;
	show the original text when error has occurred.

	* gnus-group.el (gnus-group-get-new-news-this-group): Pass the
	already-computed method to gnus-activate-group.

	* gnus-start.el (gnus-make-hashtable-from-newsrc-alist): Make the
	same select-methods identical Lisp objects.

	* gnus-srvr.el (gnus-server-set-info): Don't make a new Lisp
	object when modifying the info.

2004-06-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-srvr.el (gnus-server-set-info): Remove the server from
	gnus-opened-servers since it has never been opened with the new
	configuration yet.

2004-06-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnheader.el (nnheader-nov-read-message-id): Pass the optional
	arg to nnheader-generate-fake-message-id.

2004-06-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnheader.el (nnheader-generate-fake-message-id): accept a
	number and build a fake message ID localized to a group and
	article number (so it's repeatable from that point on)
	(nnheader-fake-message-id-p): change regex to accomodate new fake
	ID format

	* gnus-sum.el (gnus-get-newsgroup-headers): call
	nnheader-generate-fake-message-id with the article number

2004-06-12  YAGI Tatsuya  <ynyaaa@ybb.ne.jp>  (tiny change)

	* gnus-art.el (gnus-article-next-page): Fix the way to find a real
	end-of-buffer.

2004-06-12  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-ignored-supersedes-headers): Add Approved. 

2004-06-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-message-header): Remove useless
	goto-char.
	(rfc2047-encode): Fold the line before encoding.

2004-06-10  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* rfc2047.el (rfc2047-encode-message-header): Disabled header
	folding -- not all headers can be folded, and this should be done
	by the message composition mode.  Probably.  I think. 

2004-06-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-remove-text-with-property): Make it slightly
	fast.

	* gnus-ems.el (gnus-remove-image): Don't use
	message-text-with-property; remove only the image found first.

	* gnus-xmas.el (gnus-xmas-remove-image): Remove only the image
	found first.

2004-06-09  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-send-mail-with-sendmail): Use with-current-buffer.

2004-06-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-text-with-property): Make it fast and accept
	optional arguments.
	(message-strip-forbidden-properties): Use it.
	(message-fix-before-sending): Follow the m-t-w-p change.

	* gnus-ems.el (gnus-remove-image): Follow the m-t-w-p change.

2004-06-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-hide-headers): Don't change the buffer
	mistakenly when performing mml-preview even if
	gnus-single-article-buffer is nil.

2004-06-08  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* message.el (message-expand-name-databases): New user option.
	(message-expand-name): Use it.

2004-06-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-report-articles-resend)
	(spam-report-resend-register-routine): allow ham reporting
	(spam-report-resend-register-ham-routine): simple wrapper
	(spam-registration-functions): add ham resending functions
	(spam-list-of-processors): add ham resend processor

	* gnus.el (ham-resend-to): new group parameter
	(spam-process): add ham resend option

	* spam-report.el (spam-report-resend): allow reporting ham
	(spam-report-resend-ham): simple wrapper

2004-06-06  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-cite-articles-with-x-no-archive): New
	variable. 
	(message-cite-original): Use it.

2004-06-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-cite-original): Respect X-No-Archive. 

2004-06-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-hide-headers): Refer to the values for
	gnus-ignored-headers and gnus-visible-headers in the summary
	buffer since a user may have set them as group parameters.

2004-06-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* assistant.el (assistant-node-name): new convenience function
	(assistant-render-text, assistant-render-node): error handling,
	plus handle multiple next nodes
	(assistant-find-next-node): commented out for now
	(assistant-find-next-nodes): new function, returns list of next
	nodes

2004-06-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* mail-source.el (mail-source-directory): Fix doc-string.

2004-05-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* assistant.el (assistant-render-text, assistant-eval): add :set
	widget type, which is different because it takes and returns a
	list.  Much hilarity ensues.

2004-05-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-alist): Fixed regexp for manual links.

	* gnus-group.el (gnus-group-get-new-news-this-group): Added
	doc-string.

	* gnus-start.el (gnus-activate-group): Added doc-string.

2004-05-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-encode.el (mm-safer-encoding): Consider 7bit is safe.

2004-05-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* assistant.el (assistant-render-text): trying to add a :set
	widget, more to come...

	* spam.el (spam-group-spam-contents-p): handle empty groupname
	strings
	(spam-report-articles-resend)
	(spam-report-resend-register-routine): allow spam-report-resend-to
	to be a group parameter or a global value
	(tiny change).  From Daniel Pittman <daniel@rimspace.net>.
	(spam-register-routine): do registration iff any articles warrant
	it.
	(spam-summary-prepare-exit): changed log message for nil group
	destinations 

2004-05-26  Simon Josefsson  <jas@extundo.com>

	* starttls.el: Merge with my GNUTLS based starttls.el.
	(starttls-gnutls-program, starttls-use-gnutls)
	(starttls-extra-arguments, starttls-process-connection-type)
	(starttls-connect, starttls-failure, starttls-success): New
	variables.
	(starttls-program, starttls-extra-args): Doc fix.
	(starttls-negotiate-gnutls, starttls-open-stream-gnutls): New
	functions.
	(starttls-negotiate, starttls-open-stream): Check
	`starttls-use-gnutls' and pass on to corresponding *-gnutls
	function if it is set.

2004-05-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Encode encoded words in
	structured fields.

2004-05-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-resend): Bind rfc2047-encode-encoded-words.

2004-05-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-mark-junk-as-spam-routine)
	(spam-mark-new-messages-in-spam-group-as-spam): allow user to
	disable assigning the spam-mark to new messages
	(spam-ham-copy-or-move-routine): todo decleared twice (tiny
	change).  From Adam Sj,Ax(Bgren <asjo@koldfront.dk>.

2004-05-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload customize-set-variable for XEmacs.

	* rfc2047.el (rfc2047-encodable-p): Don't move point.
	(rfc2047-decode): Treat the ascii coding-system as raw-text by
	default.

2004-05-25  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-sum.el (gnus-summary-delete-article): invoke hook with
	correct data (tiny change).  From Anand Mitra <mitramc@yahoo.com>.

2004-05-24  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-list-of-processors): use nil for nonexistent processors
	(spam-group-processor-p): fixed function so it works properly
	(spam-group-processor-multiple-p)
	(spam-group-spam-processor-report-gmane-p)
	(spam-group-spam-processor-report-resend-p)
	(spam-group-spam-processor-bogofilter-p)
	(spam-group-spam-processor-blacklist-p)
	(spam-group-spam-processor-ifile-p)
	(spam-group-ham-processor-ifile-p)
	(spam-group-spam-processor-spamoracle-p)
	(spam-group-spam-processor-crm114-p)
	(spam-group-ham-processor-bogofilter-p)
	(spam-group-spam-processor-stat-p)
	(spam-group-ham-processor-stat-p)
	(spam-group-ham-processor-whitelist-p)
	(spam-group-ham-processor-BBDB-p)
	(spam-group-ham-processor-spamoracle-p)
	(spam-group-ham-processor-copy-p): functions removed with some
	prejudice against unneeded code
	(spam-report-articles-resend)
	(spam-report-resend-register-routine): allow the group/topic
	spam-resend-to value to override spam-report-resend-to
	(spam-summary-prepare-exit): invoke spam-group-processor-p
	properly now

	* spam-report.el (spam-report-resend-to, spam-report-resend):
	start with resend-to set to nil, and then ask the user if
	necessary.  From Daniel Pittman <daniel@rimspace.net>.

	* gnus.el (spam-resend-to): new group/topic parameter
	(spam-process): move the OBSOLETE processors to the end of the
	choices.

	* spam-report.el (spam-report-resend): spam-report-resend takes a
	list of articles, not separate article numbers.  From Daniel
	Pittman <daniel@rimspace.net>.

2004-05-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-text-html-renderer): Make sure w3m exists in
	addition to emacs-w3m.

2004-05-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* assistant.el (assistant-authinfo-data): New function.
	(assistant-eval): Eval for entire assistant.

	* netrc.el (netrc-services-file): New variable.
	(netrc-parse-services): New function.
	(netrc-find-service-name): New function.
	(netrc-find-service-number): New function.
	(netrc-port-equal): New function.
	(netrc-machine): Use it.

	* nnimap.el (nnimap-open-connection): Use netrc.

	* gnus-util.el (gnus-netrc-get): Remove aliases.
	
	* gnus-sum.el (gnus-auto-center-summary): Change default to 2.

	* assistant.el (wid-edit): Fix compilation.

	* gnus-util.el (gnus-set-file-modes): Just ignore errors. 

2004-05-23  Paul Stodghill  <stodghil@cs.cornell.edu>

	* gnus-util.el (gnus-set-file-modes): New function.  (small
	patch). 

2004-05-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-topic.el (gnus-topic-jump-to-topic): Goto missing topic.

	* assistant.el (assistant-render-node): Fix up rendering and
	read-only text. 
	(assistant-render-node): Reset.
	(assistant-make-read-only): Not sticky.

2004-05-20  Danny Siu  <dsiu@adobe.com>

        * gnus-sum.el (gnus-summary-recenter): Summery buffer was not auto
	centered even when gnus-auto-center-summary is t

2004-05-22  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (dns-get-txt-answer): New function.
	(dns-read-txt): Ditto.
	(query-dns): Use it.

2004-05-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-get-unread-articles): Don't invalidate
	active for foreign groups even if the group level is higher than
	the specified value.

2004-05-21  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-group-jump-to-group): Don't prompt for
	non-active groups.

	* gnus-art.el (gnus-picon-databases): Add /usr/share/picons.

2004-05-20  Magnus Henoch  <mange@freemail.hu>

	* dns.el (dns-read-type): Add support for SVR.  (small patch)

2004-05-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-use-crm114, spam-crm114, spam-crm114-program)
	(spam-crm114-header, spam-crm114-spam-switch)
	(spam-crm114-spam-strong-switch, spam-crm114-ham-strong-switch)
	(spam-crm114-positive-spam-header)
	(spam-crm114-database-directory, spam-list-of-processors)
	(spam-group-spam-processor-crm114-p)
	(spam-group-ham-processor-crm114-p, spam-extra-header-to-number)
	(spam-generic-score, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions)
	(spam-check-crm114-headers, spam-crm114-score)
	(spam-check-crm114, spam-crm114-register-with-crm114)
	(spam-crm114-register-spam-routine)
	(spam-crm114-unregister-spam-routine)
	(spam-crm114-register-ham-routine)
	(spam-crm114-unregister-ham-routine): add CRM114 support.  From
	asjo@koldfront.dk (Adam Sj,Ax(Bgren).

	* gnus.el: added spam-use-crm114

	* spam.el (spam-list-of-processors, spam-registration-functions):
	add spam-use-resend
	(spam-group-spam-processor-report-resend-p): utility wrapper
	(spam-report-articles-gmane): doc fix
	(spam-report-articles-resend,
	spam-report-resend-register-routine): wrappers around
	spam-report-resend-to

	* spam-report.el (spam-report-resend-to, spam-report-resend):
	support for resending spam
	(spam-report-gmane): line length >80 fix

	* gnus.el (spam-process): add spam-use-resend

2004-05-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* spam.el (spam-mark-spam-as-expired-and-move-routine): Return the
	number of processed spam messages.
	(spam-ham-copy-or-move-routine): Return the number of processed
	ham messages.
	(spam-summary-prepare-exit): Use the above values to decide
	whether status messages shouled be displayed.

2004-05-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-function-alist): Renamed from
	`rfc2047-encoding-function-alist' in order to avoid conflicting
	with the old version.
	(rfc2047-encode-region): Concatenate words containing non-ASCII
	characters in structured fields; don't encode space-delimited
	ASCII words even in unstructured fields; don't break words at
	char-category boundaries.
	(rfc2047-encode-1): New function.
	(rfc2047-encode): Use it; encode text so that it occupies the
	maximum width within 76-column; work correctly on Q encoding for
	iso-2022-* charsets.
	(rfc2047-fold-region): Use existing whitespace for LWSP; make it
	sure not to break a line just after the header name.
	(rfc2047-b-encode-region): Removed.
	(rfc2047-b-encode-string): New function.
	(rfc2047-q-encode-region): Removed.
	(rfc2047-q-encode-string): New function.

	* mm-util.el (mm-replace-in-string): New function.

2004-05-20  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-inews-make-draft-meta-information): Really
	get it right.
	(gnus-inews-make-draft): Really.

2004-05-19  Ben Menasha  <bmenasha@benmenasha.net>

	* nnmh.el (nnmh-request-list-1): Don't check the link count
	before descending.  (small patch)

2004-05-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-inews-make-draft-meta-information): Fix quote
	stuff. 

	* gnus-start.el (gnus-subscribe-hierarchical-interactive): Match
	on real group name.

	* gnus-art.el (gnus-signature-limit): Doc fix.

	* gnus-msg.el (gnus-inews-make-draft): Quote list.

	* pgg-pgp.el (pgg-pgp-verify-region): Clean up.

2004-05-19  Michael Schierl  <schierlm-usenet@gmx.de>

	* pgg-pgp.el (pgg-pgp-verify-region): Default when signature
	isn't a string.

2004-05-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-draft.el (gnus-draft-send): Bind
	rfc2047-encode-encoded-words.

	* rfc2047.el (rfc2047-encode-region): Encode =? strings. 
	(rfc2047-encodable-p): Say that =? needs encoding.
	(rfc2047-encode-encoded-words): New variable.

	* gnus-group.el (gnus-group-select-group): Doc fix.

	* gnus-draft.el (gnus-draft-setup): Mark all replied as replied. 

	* gnus-group.el (gnus-group-mode): Set show-trailing-whitespace
	to nil.
	
	* gnus-cache.el (gnus-cache-possibly-enter-article): Use it.

	* nnheader.el (nnheader-get-lines-and-char): New function.

2004-05-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-summary-followup-with-original): Document
	yanking of region when active.

2004-05-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-get-unread-articles): Do nothing for foreign
	groups if the group level is higher than the specified value.

2004-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-jump-to-group-prompt): Allow an alist.
	(gnus-group-jump-to-group): Added prefix argument using
	`gnus-group-jump-to-group-prompt'.  Query before jumping to
	non-active group.

	* compface.el (uncompface): Be verbose when changing
	`uncompface-use-external'.

	* gnus-art.el (gnus-button-handle-man, gnus-button-alist): Try to
	handle manual section.

2004-05-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-button-alist): Revert previous change.

2004-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-idna-to-ascii-rhs-1): Fix typo.

2004-05-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-inews-do-gcc): Don't use read-only-p to see
	whether backend can accept message.

	* message.el (message-idna-to-ascii-rhs-1): Don't use equalp. 

2004-05-18  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* nntp.el (nntp-request-set-mark, nntp-request-update-info):
	Avoid creating directory when nntp-marks-is-evil is true.
	Reported by Reiner Steib.

2004-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-picon.el (gnus-picon-style): New variable.
	(gnus-picon-insert-glyph): Added optional `nostring' argument.
	(gnus-picon-transform-address): Support `gnus-picon-style'.  From
	Jesper Harder <harder@ifa.au.dk>.

2004-05-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-fill-field): Return point.
	(message-generate-headers): Go to end of field.

	* gnus-start.el (gnus-get-unread-articles-in-group): Don't do
	stuff for non-living groups.

2004-05-18  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-article-followup-with-original)
	(gnus-article-reply-with-original): gnus-mark-active-p ->
	gnus-region-active-p.

2004-05-17  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): fix messages, so they show
	only when there is spam or ham to be processed

2004-05-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* mail-source.el (mail-source-delete-crash-box): Refactor.
	(mail-source-fetch): Use it.
	(mail-source-fetch-file): Ditto.
	(mail-source-fetch-directory): Run postscript in loop. 
	(mail-source-fetch-pop): Delete.
	(mail-source-fetch-maildir): Ditto.
	(mail-source-fetch-imap): Ditto.

	* imap.el (imap-authenticators): Comment out sasl.

	* message.el (message-skip-to-next-address): New function.
	(message-fill-header-address): Refactor.
	(message-fill-address): Use it.
	(message-delete-address): Use it.
	(message-fill-header-general): Refactor.
	(message-fill-field-address): Rename.
	(message-narrow-to-field): Find the start of the header. 
	(message-header-format-alist): Don't pre-fill.
	(message-fill-header): Removed.
	(message-insert-header): New function.
	(message-shorten-references): Use it.

	* rfc2047.el (rfc2047-field-value): Strip props.

	* mail-parse.el (mail-header-make-address): New alias.

	* ietf-drums.el (ietf-drums-make-address): New function.

	* imap.el: Add compiler directives.

	* gnus-score.el (gnus-score-edit-done): run-hook->run-hooks. 

	* gnus-art.el (article-decode-idna-rhs): Don't use
	message-idna-inside-rhs-p. 

2004-05-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-idna-inside-rhs-p): Removed.
	(message-idna-to-ascii-rhs-1): Use proper address parsing.

	* gnus-art.el (gnus-emphasis-alist): Removed strikethru; too many
	false positives.

2004-05-16  Kim Minh Kaplan  <kmkaplan-AwwS6Bc0PDVoiYX5Tdu9fQ@public.gmane.org>

	* imap.el (imap-sasl-make-mechanisms): Use sasl. 

2004-05-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nneething.el (nneething-file-name): Don't create spurions
	files. 

	* gnus-msg.el (gnus-inews-do-gcc): Ignore read-only groups. 
	(gnus-inews-do-gcc): Remove sleep.

	* gnus-art.el (gnus-mime-delete-part): Error message when no MIME
	part under point.

	* gnus-agent.el (gnus-agent-synchronize-flags): Default to nil. 
	(gnus-agent-regenerate-group): Using nil messages aren't valid. 

2004-05-15  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): oops, forgot (length)

2004-05-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-dup.el (gnus-dup-unsuppress-article): don't assume the mail
	header is not nil (tiny change).  From Nelson Ferreira
	<nelson.ferreira@verizon.net>.

	* spam.el (spam-summary-prepare-exit): only produce "marking spam
	as expired without moving it" message when there are spam
	messages left

2004-05-14  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* nntp.el (nntp-request-set-mark, nntp-request-update-info): Call
	nntp-possibly-create-directory, not nntp-possibly-change-group.
	(nntp-marks-changed-p): New arg SERVER.
	(nntp-request-update-info): Adjust caller.

2004-05-14  Kai Grossjohann  <kai@emptydomain.de>

	* nntp.el (nntp-save-marks): Pass missing arg.

2004-05-13  Kai Grossjohann  <kai.grossjohann@gmx.net>

	* nntp.el: Support marks.
	(nntp-marks-is-evil, nntp-marks-file-name, nntp-marks)
	(nntp-marks-modtime, nntp-marks-directory): New variables.
	(nntp-request-set-mark, nntp-request-update-info)
	(nntp-possibly-create-directory, nntp-marks-changed-p)
	(nntp-save-marks, nntp-open-marks, nntp-marks-directory): New
	functions.

2004-05-12  Jesper Harder  <harder@ifa.au.dk>

	* gnus-xmas.el (gnus-xmas-select-lowest-window)
	(gnus-xmas-redefine): Rename.

	* gnus-score.el (gnus-score-insert-help): Use
	gnus-select-lowest-window.

	* gnus-ems.el (gnus-select-lowest-window): Copy definition of
	appt-select-lowest-window and rename to gnus-select-lowest-window.

	* gnus.el: do.

2004-05-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* rfc2047.el (rfc2047-encode): Use uppercase letters to specify
	encodings of MIME-encoded words, in order to improve
	interoperability with several broken MUAs.

2004-05-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mm-view.el (mm-inline-text-html-render-with-w3): Check META
	tags, only when charsets are not specified in headers.
	(mm-inline-text-html-render-with-w3m): Ditto.

	* lpath.el: Remove `w3m-meta-content-type-charset-regexp' and
	`w3m-charset-to-coding-system'.  Add `w3m-detect-meta-charset'.

2004-05-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus-art.el (article-strip-banner): Use MIME-encoded from fields
	instead of MIME-decoded from fields when checking
	`gnus-article-address-banner-alist'.

2004-05-03  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-check-group, nnrss-read-group-data): Hash on
	description rather than subject.

2004-05-02  Steve Youngs  <steve@youngs.au.com>

	* dgnushack.el: Autoload `mail-fetch-field' for XEmacs.

2004-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump.

2004-05-01 Lars Magne Ingebrigtsen <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.2 is released.

2004-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-agent.el (gnus-agent-read-agentview): Inline
	gnus-uncompress-range.

2004-05-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* spam.el (spam-bsfilter-path): Use `executable-find' instead of
	`exec-installed-p'.

2004-04-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus.el (spam-process, spam-autodetect-methods): Add
	bsfilter and bsfilter-headers.

	* spam.el (spam-bsfilter): New customize group.
	(spam-use-bsfilter, spam-use-bsfilter-headers, spam-bsfilter-path)
	(spam-bsfilter-header, spam-bsfilter-probability-header)
	(spam-bsfilter-spam-switch, spam-bsfilter-ham-switch)
	(spam-bsfilter-spam-strong-switch, spam-bsfilter-ham-strong-switch)
	(spam-bsfilter-database-directory): New options.
	(spam-install-hooks, spam-list-of-processors, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions):
	Add `spam-use-bsfilter' and `spam-use-bsfilter-headers'.
	(spam-bsfilter-score): New command.
	(spam-check-bsfilter-headers, spam-check-bsfilter)
	(spam-bsfilter-register-with-bsfilter)
	(spam-bsfilter-register-spam-routine)
	(spam-bsfilter-unregister-spam-routine)
	(spam-bsfilter-register-ham-routine)
	(spam-bsfilter-unregister-ham-routine): New functions.
	(spam-generic-score): Support bsfilter; Accept an optional argument
	to recalcurate spam score even if scoring header has already been
	added.
	(spam-bogofilter-score, spam-spamassassin-score): Accept an
	optional argument to recalcurate spam score even if scoring header
	has already been added.

2004-04-29  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-get-namespace-prefix): Use string= to compare
	strings!  Reported by David D. Smith <davidsmith@acm.org>.
	(nnrss-check-group, nnrss-read-group-data): Hash on Subject if
	link is missing.

2004-04-28  Jesper Harder  <harder@ifa.au.dk>

	* html2text.el (html2text-replace-list): Add &amp; and &apos;.
	(html2text-get-attr): Rewrite.

	* message.el (message-setup-1): Remove redundant put-text-property
	on mail-header-separator.

2004-04-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-cache-whitespace)
	(gnus-registry-action, gnus-registry-spool-action)
	(gnus-registry-split-fancy-with-parent): changed message levels
	from 5 to 3 or 7, as needed

	* spam.el (spam-summary-prepare-exit)
	(spam-mark-junk-as-spam-routine, spam-fetch-field-fast)
	(spam-split, spam-find-spam, spam-log-undo-registration)
	(spam-check-blackholes, spam-enter-ham-BBDB): changed message
	level from 5 to 6

2004-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-ems.el: Autoload appt-select-lowest-window (revert
	2004-03-04 change).

2004-04-25  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-score-buffer): Simplify mapcar usage.
	Use mapc when appropriate.

	* sieve-manage.el (sieve-manage-open): do.

	* nnweb.el (nnweb-insert-html): do.

	* nnvirtual.el (nnvirtual-catchup-group, nnvirtual-partition-sequence)
	(nnvirtual-partition-sequence, nnvirtual-create-mapping): do.

	* nnspool.el (nnspool-request-group): do.

	* nnrss.el (nnrss-opml-export, nnrss-find-el, nnrss-order-hrefs):
	do.

	* nnml.el (nnml-request-update-info): do.

	* nnmh.el (nnmh-request-group, nnmh-request-list-1, nnmh-active-number)
	(nnmh-request-create-group, nnmh-update-gnus-unreads): do.

	* nnimap.el (nnimap-request-close, nnimap-acl-edit)
	(nnimap-request-set-mark): do.

	* nnfolder.el (nnfolder-request-update-info): do.

	* mm-view.el (mm-pkcs7-signed-magic, mm-pkcs7-enveloped-magic):
	do.

	* mml.el (mml-destroy-buffers, mml-compute-boundary-1): do.

	* gnus-uu.el (gnus-uu-find-articles-matching): do.

	* gnus-topic.el (gnus-topic-check-topology, gnus-topic-remove-group):
	do.

	* gnus-sum.el (gnus-summary-fetch-faq, gnus-read-move-group-name):
	do.

	* gnus-score.el (gnus-score-load-file, gnus-sort-score-files): do.

	* gnus-nocem.el (gnus-nocem-scan-groups): do.

	* gnus-int.el (gnus-start-news-server): do.

	* gnus-group.el (gnus-group-make-kiboze-group)
	(gnus-group-browse-foreign-server): do.

2004-04-22  Teodor Zlatanov  <tzz@lifelogs.com>

	From Dan Christensen <jdc@uwo.ca>, asjo@koldfront.dk (Adam
	Sj,Ax(Bgren), Wes Hardaker <wes@hardakers.net>, and Michael Shields
	<shields@msrl.com>:
	
	* spam.el (spam-necessary-extra-headers): get the extra headers we
	may need for spam sorting and scoring
	(spam-user-format-function-S): a user format function suitable for
	general use
	(spam-article-sort-by-spam-status): sorting function for summary
	sorting
	(spam-extra-header-to-number): get a score from a header
	(spam-summary-score): get a numeric score from the headers
	(spam-generic-score): oops, function doc in wrong place
	(spam-initialize): take symbols when it's run, and install the
	extra headers that spam-necessary-extra-headers thinks we need

2004-04-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): logic and message fix.
	Reported by bojohan+news@dd.chalmers.se (Johan Bockg,Ae(Brd).

2004-04-17  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-set-global-variables)
	(gnus-build-all-threads, gnus-get-newsgroup-headers)
	(gnus-article-get-xrefs, gnus-summary-best-group)
	(gnus-summary-next-article, gnus-summary-enter-digest-group)
	(gnus-summary-set-bookmark, gnus-offer-save-summaries)
	(gnus-summary-update-info, gnus-kill-or-deaden-summary): Use
	with-current-buffer.

2004-04-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): simplified logic
	(spam-fetch-article-header): read the article header if it's not
	available
	(spam-list-articles): simplified logic
	(spam-filelist-register-routine): found bug with unregister-list

	* gnus-registry.el: clarified comments at beginning

2004-04-16  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-cater-to-broken-inn): Remove.
	(message-shorten-references): Make sure the total folded length of
	References is shorter than 998 characters to cater to a bug in INN
	2.3.  Also, don't pretend that references aren't folded -- this
	hasn't worked for a while.

2004-04-15  Kevin Greiner  <kgreiner@xpediantsolutions.com>
		
	* gnus-agent.el (gnus-agentize):
	gnus-agent-send-mail-real-function no longer set to current value
	of message-send-mail-function but rather a lambda that calls
	message-send-mail-function.  The change makes the agent real-time
	responsive to user changes to message-send-mail-function.

2004-04-15  Kevin Greiner  <kgreiner@xpediantsolutions.com>
		
	* legacy-gnus-agent.el
	(gnus-agent-convert-to-compressed-agentview): Fixed typos with
	help from Florian Weimer <fw@deneb.enyo.de>

2004-04-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-cache-insert): Revert last change.

2004-04-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-cache-insert): Always check whether
	nnmail-cache-ignore-groups matches a group name.

2004-04-13  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-fetch-field-fast, spam-generate-fake-headers)
	(spam-find-spam, spam-log-processing-to-registry)
	(spam-log-registered-p, spam-log-unregistration-needed-p)
	(spam-log-undo-registration): use gnus-message instead of
	gnus-error, none of these errors are fatal

	* gnus-registry.el (gnus-registry-clean-empty-function)
	(gnus-registry-clean-empty): remove only empty entries without
	extra data

2004-04-12  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam-stat.el (spam-stat-buffer-change-to-spam)
	(spam-stat-buffer-change-to-non-spam): change (error) to
	(gnus-message 8) invocation

2004-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-via-netcat-command): New variable.
	(nntp-via-netcat-switches): New variable.
	(nntp-open-via-rlogin-and-netcat): New function.
	(nntp-open-connection-function): Doc fix.
	(nntp-telnet-command): Doc fix.
	(nntp-end-of-line): Doc fix.
	(nntp-via-rlogin-command): Doc fix.
	(nntp-via-user-name): Doc fix.
	(nntp-via-address): Doc fix.

2004-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml2015.el (mml2015-use): Avoid the "Recursive load suspected"
	error in Emacs 21.1.

2004-04-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-get-unread-articles): Fix last commit.

2004-04-07  Kevin Greiner  <kgreiner@xpediantsolutions.com>
	* gnus-agent.el (gnus-agent-total-fetched-hashtb): New variable.
	(gnus-agent-with-refreshed-group): New macro.
	(gnus-agent-rename-group): New function.
	(gnus-agent-delete-group): New function.
	(gnus-agent-save-group-info): Use gnus-command-method when
	`method' parameter is nil.  Don't write nil entries into the
	active file.
	(gnus-agent-get-group-info): New function.
	(gnus-agent-fetch-articles): Use
	gnus-agent-update-files-total-fetched-for to increment disk space
	used.
	(gnus-agent-fetch-headers, gnus-agent-save-alist): Use
	gnus-agent-update-view-total-fetched-for to increment disk space
	used.
	(gnus-agent-get-local): Added optional parameters to avoid calling
	gnus-group-real-name and gnus-find-method-for-group.
	(gnus-agent-set-local): Delete stored entry if either min, or max,
	are nil.
	(gnus-agent-fetch-session): Reworded error/quit messages.  On
	quit, use gnus-agent-regenerate-group to record existance of any
	articles fetched to disk before the quit occurred.
	(gnus-agent-expire-group-1): Use gnus-agent-with-refreshed-group,
	gnus-agent-update-view-total-fetched-for, and
	gnus-agent-update-files-total-fetched-for to decrement disk space
	used.
	(gnus-agent-retrieve-headers): Use
	gnus-agent-update-view-total-fetched-for to increment disk space
	used.
	(gnus-agent-regenerate-group): Replace gnus-group-update-group
	with gnus-agent-update-files-total-fetched-for to decrement disk
	space and fresh group buffer.
	(gnus-agent-inhibit-update-total-fetched-for): New variable.
	(gnus-agent-need-update-total-fetched-for): New variable.
	(gnus-agent-update-files-total-fetched-for): New function.
	(gnus-agent-update-view-total-fetched-for): New function.
	(gnus-agent-total-fetched-for): New function.  

	* gnus-cache.el (gnus-cache-save-buffers): Use
	gnus-cache-update-overview-total-fetched-for to change disk space
	used by this group.
	(gnus-cache-possibly-enter-article): Use
	gnus-cache-update-file-total-fetched-for to increment disk space
	used by this group.
	(gnus-cache-possibly-remove-article): Use
	gnus-cache-update-file-total-fetched-for to decrement disk space
	used by this group.
	(gnus-cache-generate-nov-databases): Purge total fetched cache.
	(gnus-cache-rename-group): New function.
	(gnus-cache-delete-group): New function.
	(gnus-cache-inhibit-update-total-fetched-for): New variable.
	(gnus-cache-need-update-total-fetched-for): New variable.
	(gnus-cache-with-refreshed-group): New macro.
	(gnus-cache-update-file-total-fetched-for): New function.
	(gnus-cache-update-overview-total-fetched-for): New function.
	(gnus-cache-rename-group-total-fetched-for): New function.
	(gnus-cache-delete-group-total-fetched-for): New function.
	(gnus-cache-total-fetched-for): New function.

	* gnus-group.el (): Require gnus-sum and autoload functions to
	resolve warnings when gnus-group.el compiled alone.
	(gnus-group-line-format): Documented new %F
	(size of Fetched data) group line format; identifies disk space
	used by agent and cache.
	(gnus-group-line-format-alist): Defined new F format.
	(gnus-total-fetched-for): New function.
	(gnus-group-delete-group): No longer update
	gnus-cache-active-altered as gnus-request-delete-group now keeps
	the cache in sync.
	(gnus-group-list-active): Let the agent store a server's active
	list if currently plugged.

	* gnus-int.el (gnus-request-delete-group): Use
	gnus-cache-delete-group and gnus-agent-delete-group to keep the
	local disk in sync with the server.
	 (gnus-request-rename-group): Use
	gnus-cache-rename-group and gnus-agent-rename-group to keep the
	local disk in sync with the server.

	* gnus-start.el (gnus-get-unread-articles): Cosmetic
	simplification to logic.

	* gnus-util.el (gnus-rename-file): New function.

2004-04-07  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-encoded-word-regexp): Remove unnecessary
	'+'.  Reported by Stefan Wiens <s.wi@gmx.net>.

	* mm-util.el (mm-image-load-path): Handle nil in load-path.
	From Christian Neukirchen <chneukirchen@yahoo.de>.

2004-04-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-cache.el (gnus-cache-save-buffers): Check if buffer is
	alive.  Reported by Laurent Martelli <laurent@aopsys.com>.

2004-04-03  Jesper Harder  <harder@ifa.au.dk>

	* gnus.el (gnus-getenv-nntpserver): Strip whitespace.

2004-04-02  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-set-difference): new function to replace
	gnus-set-difference in spam.el
	(spam-summary-prepare-exit): use spam-set-difference

2004-03-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-cache-file): updated to use
	gnus-dribble-directory OR gnus-home-directory OR ~
	(gnus-registry-split-fancy-with-parent): fixed doc

2004-03-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-exchange-point-and-mark): Use
	message-mark-active-p.  Suggested by Jesper Harder
	<harder@ifa.au.dk>.

2004-03-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-exchange-point-and-mark): Don't activate
	region if it was inactive.  Suggested by Hiroshi Fujishima
	<pooh@nature.tsukuba.ac.jp>.

2004-03-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face): Display Faces in the same
	order as X-Faces.

2004-03-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nndoc.el (nndoc-forward-type-p): Recognize envelope From_.

2004-03-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-recompute-hierarchical-structure): Remove.
	(gnus-mime-multipart-functions): Revert 2004-03-19 change.
	(gnus-article-mime-hierarchy): Remove.
	(gnus-article-mime-hierarchy-next): Remove.
	(gnus-article-mode): Revert 2004-03-19 change.
	(gnus-article-setup-buffer): Revert 2004-03-19 change.
	(gnus-insert-mime-button): Revert 2004-03-19 change.
	(gnus-mime-accumulate-hierarchy): Remove.
	(gnus-mime-enter-multipart): Remove.
	(gnus-mime-leave-multipart): Remove,
	(gnus-mime-display-part): Revert 2004-03-19 change.
	(gnus-mime-display-alternative): Revert 2004-03-19 change.

	* mml.el (mml-preview): Revert 2004-03-19 change.

2004-03-18  Helmut Waitzmann  <Helmut.Waitzmann@web.de>  (tiny change)

	* gnus-sum.el (gnus-newsgroup-variables): Doc fix.

2004-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-save-part): Bind enable-multibyte-characters to
	t while entering a file name using the mm-with-multibyte macro.
	Suggested by Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

	* mm-util.el (mm-with-multibyte): New macro.

2004-03-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-recompute-hierarchical-structure): New
	user option.
	(gnus-mime-multipart-functions): Doc and customization fix.
	(gnus-article-mime-hierarchy): New variable.
	(gnus-article-mime-hierarchy-next): New variable.
	(gnus-article-mode): Make gnus-article-mime-hierarchy buffer-local.
	(gnus-article-setup-buffer): Set gnus-article-mime-hierarchy and
	gnus-article-mime-hierarchy-next to nil.
	(gnus-insert-mime-button): Show hierarchy numbers.
	(gnus-mime-accumulate-hierarchy): New function.
	(gnus-mime-enter-multipart): New function.
	(gnus-mime-leave-multipart): New function.
	(gnus-mime-display-part): Recompute hierarchical MIME structure.
	(gnus-mime-display-alternative): Show hierarchy numbers.

	* mml.el (mml-preview): Set gnus-article-mime-hierarchy and
	gnus-article-mime-hierarchy-next to nil.

2004-03-19  Steve Youngs  <sryoungs@bigpond.net.au>

	* dns.el: Don't require gnus-xmas.

2004-03-17  Jesper Harder  <harder@ifa.au.dk>

	* mml.el (mml-generate-mime-1): Don't use format=flowed with
	inline PGP.
	(mml-menu): Disable mml-quote-region if mark is inactive.

2004-03-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-regenerate-group): Activate the group
	when the group's active is not available.

2004-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-read-agentview): Add a missing arg to
	error.

	* gnus-sum.el (gnus-read-header): Don't remove a header for the
	parent article of a sparse article in the thread hashtb.  From
	Stefan Wiens <s.wi@gmx.net>.

2004-03-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* imap.el (imap-store-password): New variable.
	(imap-interactive-login): Use it.
	Suggested by Mark Plaksin <happy@mcplaksin.org>.

2004-03-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-read-summary-keys): Restore new
	window-start and hscroll to summary window.

2004-03-12  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-start.el (gnus-convert-old-newsrc): Only write the
	conversion message to newsrc-dribble when an actual conversion is
	performed.

2004-03-10  Malcolm Purvis <malcolmpurvis@optushome.com.au>  (tiny change)

	* spam-stat.el (spam-stat-coding-system): Use mm-coding-system-p.

2004-03-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-complicated-handles): New function reviving
	former definition of mm-multiple-handles.

	* gnus-art.el (gnus-mime-save-part-and-strip): Use it.
	(gnus-mime-delete-part): Use it.

2004-03-09  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-read-local): Bind
	nnheader-file-coding-system to gnus-agent-file-coding-system to
	avoid the implicit assumption that they will always be equal.
	(gnus-agent-save-local): Bind buffer-file-coding-system, not
	coding-system-for-write, as the with-temp-file macro first prints
	to a buffer then saves the buffer.

2004-03-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-edit-part): New function.
	(gnus-mime-save-part-and-strip): Use it; do query instead of
	signaling an error; don't use mm-multiple-handles.
	(gnus-mime-delete-part): Ditto.

2004-03-08  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-read-agentview): Removed support for
	old file versions.
	(gnus-group-prepare-hook): Removed function that converted list
	form of gnus-agent-expire-days to group properties.

	* gnus-int.el: Autoload gnus-agent-regenerate-group.
	(gnus-request-accept-article): Re-indented.

	* gnus-start.el (gnus-convert-old-newsrc): Registered new
	converters to handle old agent file formats.  Added logic for a
	"backup before upgrading warning".
	(gnus-convert-mark-converter-prompt): Developers can mark
	functions as needing (default), or not needing,
	gnus-convert-old-newsrc's "backup before upgrading warning".
	(gnus-convert-converter-needs-prompt): Tests whether the user
	should be protected from potentially irreversable changes by the
	function.

	* legacy-gnus-agent.el (): New. Provides converters that are only
	loaded when gnus-convert-old-newsrc needs to call them.
	
2004-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mail-source.el (mail-source-touch-pop): Doc fix.

	* message.el (message-smtpmail-send-it): Doc fix.

2004-03-05  Jesper Harder  <harder@ifa.au.dk>

	* sha1-el.el (sha1-maximum-internal-length): Doc fix.

	* nnmail.el (nnmail-split-fancy): do.

	* gnus-kill.el (gnus-kill, gnus-execute): do.

2004-03-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-sum.el (gnus-widget-reversible-match) 
	(gnus-widget-reversible-to-internal) 
	(gnus-widget-reversible-to-external): New functions.
	(gnus-widget-reversible): New widget.
	(gnus-article-sort-functions, gnus-thread-sort-functions): Use it.

2004-03-05  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* gnus-sum.el (gnus-thread-sort-functions)
	(gnus-article-sort-functions): Document `(not F)' items.

2004-03-04  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-use-gmane-xref): new backend
	(spam-gmane-xref-spam-group): variable to control the name of the
	Gmane spam group
	(spam-blackhole-servers, spam-blackhole-good-server-regex)
	(spam-regex-headers-spam, spam-regex-headers-ham)
	(spam-regex-body-spam, spam-regex-body-ham): clarified docs
	(spam-list-of-checks): added spam-use-gmane-xref to list of
	backends and checks
	(spam-check-gmane-xref): function for spam-use-gmane-xref

	* gnus.el (spam-autodetect-methods): add spam-use-gmane-xref as
	an autodetect method

2004-03-04  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-int.el (gnus-request-accept-article): Inform the agent that
	articles are being added to a group.
	(gnus-request-replace-article): Inform the agent that articles
	need to be uncached as the cached contents are no longer valid.
	
2004-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* binhex.el: Don't autoload executable-find.

	* canlock.el: Don't autoload mail-fetch-field.

	* dgnushack.el: Autoload c-mode for XEmacs.

	* gnus-ems.el: Don't autoload appt-select-lowest-window.

	* gnus-msg.el: Don't autoload news-reply-mode, news-setup,
	rmail-dont-reply-to and rmail-output.

	* gnus-score.el: Don't autoload ffap-string-at-point.

	* gnus-setup.el: Don't autoload sc-cite-original.

	* imap.el: Don't autoload base64-decode-string,
	base64-encode-string and md5.

	* message.el: Autoload rmail-dont-reply-to, rmail-msg-is-pruned
	and rmail-msg-restore-non-pruned-header.

	* mm-decode.el: Don't autoload executable-find.

	* mm-url.el: Don't autoload executable-find.

	* mm-view.el: Don't autoload diff-mode.

	* nndb.el: Don't autoload news-reply-mode, news-setup,
	cancel-timer and telnet.

	* password.el: Don't autoload run-at-time for Emacs.

	* sha1-el.el: Don't autoload executable-find.

	* sieve-mode.el: Don't autoload c-mode.

	* uudecode.el: Don't autoload executable-find.

2004-03-04  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-file-header-cache): Removed.
	(gnus-agent-possibly-alter-active): Avoid null in numeric
	comparison.
	(gnus-agent-set-local): Refuse to save null in local object table.
	(gnus-agent-regenerate-group): The REREAD parameter can now be a
	list of articles that will be marked as unread.

2004-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encoded-word-regexp): Mismatched paren.

2004-03-04  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-encoded-word-regexp): Support RFC 2231
	language tags.

2004-03-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-agent.el (gnus-agent-read-local, gnus-agent-save-local):
	Don't bind "obarray".

	* gnus-sum.el (gnus-thread-sort-functions): Added
	`gnus-thread-sort-by-most-recent-number' and
	`gnus-thread-sort-by-most-recent-date'.
	Reported by Kai Grossjohann <kai@emptydomain.de>.

2004-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cus.el (gnus-agent-customize-category): Mismatched paren.

2004-03-02  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-cus.el (gnus-agent-customize-category): Removed
	ignore-errors macro reference that required cl to be loaded at
	run-time.

	* gnus-range.el (gnus-sorted-range-intersection): Now accepts
	single-interval range of the form (min . max).  Previously the
	range had to look like ((min . max)).  Likewise, return
	(min . max) rather than ((min . max)).
	(gnus-range-map): Use gnus-range-normalize to accept
	single-interval range.

	* gnus-sum.el (gnus-summary-highlight-line): Articles stored in
	the cache, but not the agent, now appear with their usual face.

	* dgnushack.el (loaddir): New variable that is bound to the
	directory containing the dgnushack.el file. Use loaddir, rather
	than srcdir, to update load-path. Change lets dgnushack compile
	code in directories other than GNUS/lisp.

2004-03-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Don't bind w3m-safe-url-regexp.

	* gnus-art.el (gnus-article-wash-html-with-w3m): Don't make the
	w3m-safe-url-regexp variable buffer-local.

	* mm-view.el (mm-inline-text-html-render-with-w3m): Ditto.

2004-02-27  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-move-group-prefix-function): Add, default to
	gnus-group-real-prefix.
	(gnus-summary-move-article): Use it, instead of
	gnus-group-real-prefix.

2004-02-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Bind w3m-safe-url-regexp.

	* gnus-art.el (gnus-article-wash-html-with-w3m): Make the
	w3m-safe-url-regexp variable buffer-local and set it as the value
	of mm-w3m-safe-url-regexp.

	* mm-view.el (mm-inline-text-html-render-with-w3m): Ditto.

	* gnus-msg.el (gnus-setup-message): Ignore an article copy while
	parsing gnus-posting-styles when the message is not for replying.

	* dgnushack.el: Autoload sgml-mode for XEmacs.

	* nnrss.el (nnrss-opml-export): Use
	mm-set-buffer-file-coding-system instead of
	set-buffer-file-coding-system.

2004-02-27  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el: Pedantic docstring and whitespace fixes (courtesy
	of checkdoc.el).
	* nnrss.el: do.
	* gnus-mlspl.el: do.
	* gnus-ml.el: do.
	* gnus-srvr.el: do.

	* nnrss.el (nnrss-opml-export): Turn on sgml-mode.

2004-02-27  Kevin Ryde  <user42@zip.com.au>  (tiny change)

	* gnus.el (gnus-group, gnus-summary, gnus-summary-sort):
	Corrections to custom-manual links.

	* gnus-art.el (gnus-article): Ditto.

	* mm-decode.el (mime-display, mime-security): Ditto.

2004-02-26  Jesper Harder  <harder@ifa.au.dk>

	* flow-fill.el: Typo.

2004-02-26  Andrew Cohen <cohen@andy.bu.edu>

	* spam-wash.el: New file.

2004-02-26  Mark A. Hershberger <mah@everybody.org> 

	* nnrss.el (nnrss-opml-import, nnrss-opml-export): New functions.

2004-02-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): gnus-set-difference needs
	to be run with new-articles as LIST1, not LIST2
	(spam-registration-functions): add spam-use-ham-copy as a nil
	registration backend

2004-02-26  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-washing-hook): New option.
	(spam-stat-buffer-words): Use it.
	(spam-stat-process-directory, spam-stat-test-directory): Use
	insert-file-contents-literally.
	(spam-stat-coding-system): New variable.
	(spam-stat-load, spam-stat-save): Use it.

2004-02-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* spam-report.el (spam-report-plug-agent): Quote
	spam-report-url-to-file and spam-report-url-ping-plain.

2004-02-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-alist, gnus-header-button-alist): Allow
	/ in mailto URLs.

2004-02-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-process-queue): Fix interactive use.
	(spam-report-url-ping-temp-agent-function, spam-report-plug-agent)
	(spam-report-unplug-agent): Doc fixes.
	(spam-report-url-ping-mm-url, spam-report-url-to-file)
	(spam-report-agentize, spam-report-deagentize): Autoload

2004-02-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el (with-syntax-table): Redefine it for XEmacs 21.5.

	* message.el (message-setup-fill-variables): Add mml tags to
	paragraph-start and paragraph-separate.  Suggested by Andrew Korty
	<ajk@iu.edu>.
	(message-mode): Don't modify paragraph-separate there.

2004-02-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* compface.el (uncompface-use-external): Default to undecided.
	(uncompface-use-external-threshold): New variable.
	(uncompface-float-time): New macro.
	(uncompface): Determine whether to use the external decoder if
	uncompface-use-external is undecided.

2004-02-15  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* mm-view.el (mm-inline-image-emacs): Don't insert blank lines
	after images.

	* gnus-art.el (gnus-mime-display-single): Remove dead code.

2004-02-14  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-request-article, nnrss-find-el): Cleanup.

	* html2text.el (html2text-get-attr, html2text-fix-paragraph): do

	* gnus-sum.el (gnus-summary-limit-to-age)
	(gnus-summary-limit-children): do.

	* gnus-int.el (gnus-request-scan): do.

	* gnus-group.el (gnus-group-suspend): do.

	* gnus-cus.el (gnus-agent-cat-prepare-category-field): do.

	* gnus-cite.el (gnus-cite-parse-attributions): do.

	* gnus-agent.el (gnus-summary-set-agent-mark)
	(gnus-agent-regenerate-group): do.

	* deuglify.el (gnus-article-outlook-unwrap-lines): do.

	* binhex.el (binhex-decode-region-internal): do.

2004-02-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-fun.el (gnus-face-properties-alist): New user option.
	(gnus-display-x-face-in-from): Use it.

	* gnus-art.el (article-display-face): Ditto.

	* compface.el (uncompface-use-external): Default to nil.

2004-02-12  Jesper Harder  <harder@ifa.au.dk>

	* nntp.el (nntp-erase-buffer): New function.
	(nntp-retrieve-data, nntp-send-command)
	(nntp-send-buffer, nntp-retrieve-groups, nntp-handle-authinfo)
	(nntp-possibly-change-group): Use it.

	* nnnil.el (nnnil-retrieve-headers, nnnil-request-list): Use
	with-current-buffer.

2004-02-12  TAKAI Kousuke  <tak@kmc.gr.jp>

	* compface.el: Merge the ELisp-based uncompface program.
	(compface): New customization group.
	(uncompface-use-external): New user option.
	(uncompface): Call uncompface-internal if uncompface-use-external
	is nil.
	(uncompface-internal): New function.  Note that there are also
	some other functions and variables added for this function.

2004-02-10  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-read-group-data): Initialize nnrss-group-hashtb
	if necessary.

2004-02-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam-report.el (spam-report-unplug-agent)
	(spam-report-plug-agent, spam-report-deagentize)
	(spam-report-agentize, spam-report-url-ping-temp-agent-function):
	support for the Agent in spam-report: when unplugged, report to a
	file; when plugged, submit all the requests

	* spam.el (spam-register-routine): improved message about
	registration

2004-02-09  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-qp-or-base64): New function to reduce
	dependencies.
	(rfc2047-encode): Use it.

	* gnus-art.el (gnus-button-marker-list): Move before first
	reference.

	* imap.el (imap-parse-flag-list, imap-parse-body-extension)
	(imap-parse-body): Fix format string mismatch.

	* gnus-score.el (gnus-summary-increase-score): do.

	* nnrss.el (nnrss-close): New function.

2004-02-08  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-make-filename): New function.
	(nnrss-request-delete-group, nnrss-read-server-data)
	(nnrss-save-server-data, nnrss-read-group-data)
	(nnrss-save-group-data): Use it.
	(nnrss-save-server-data, nnrss-save-group-data): Use gnus-prin1.
	(nnrss-read-server-data, nnrss-read-group-data): Use load.
	(nnrss-group-hashtb): Make it a hash table rather than an obarray.

2004-02-07  Jesper Harder  <harder@ifa.au.dk>

	* mml.el (mml-compute-boundary-1): Don't uncompress files.

2004-02-06  Jesper Harder  <harder@ifa.au.dk>

	* mml.el (mml-mode, mml-x-dnd-attach-file): Attach drop and drag
	files.

	* message.el (message-generate-headers-first): Don't quote nil
	and t in docstrings.

	* imap.el (imap-id): do.

	* gnus-agent.el (gnus-agent-consider-all-articles)
	(gnus-agent-queue-mail): do.

2004-02-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-process-queue): New function.
	Process requests from `spam-report-requests-file'.
	(spam-report-process-queue): Doc fix.

2004-02-05  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-register-routine)
	(spam-log-processing-to-registry, spam-log-registered-p)
	(spam-log-unregistration-needed-p, spam-log-undo-registration):
	change "check" to "spam-check" for semi-clarity

2004-02-05  Jesper Harder  <harder@ifa.au.dk>

	* pop3.el: Require nnheader.

	* mml-smime.el: Require cl.  Autoload message-fetch-field.

	* mml-sec.el (mml-signencrypt-style): Don't depend on Gnus.

	* gnus-picon.el: Require cl.

	* gnus-fun.el: Require gnus-ems and gnus-util.

	* gnus.el (gnus-method-to-server): Move defsubst before first use.

	* gnus-diary.el (gnus-diary-header-schedule): caddr -> car (cddr

	* gnus-art.el (gnus-article-edit-mode): Define before first
	reference.

2004-02-04  Jesper Harder  <harder@ifa.au.dk>

	* gnus-uu.el (gnus-uu-check-correct-stripped-uucode): Simplify.
	(gnus-uu-post-encoded): Use point-at-bol.

	* gnus-topic.el (gnus-group-active-topic-p): do.

	* gnus-start.el (gnus-newsrc-to-gnus-format): do.

	* gnus-group.el (gnus-group-kill-region): do.

	* gnus-art.el (article-date-ut): do.

	* message.el (message-fetch-field): Remove redundant
	case-fold-search binding.
	(message-narrow-to-field): Simplify.

2004-02-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam.el (spam-directory): Derive from `gnus-directory'.

	* spam-report.el (spam-report-url-to-file)
	(spam-report-requests-file): New function and variable for offline
	reporting.
	(spam-report-url-ping-function): Add `spam-report-url-to-file'
	and user defined function.
	(spam-report-url-ping-mm-url): Remove doubled slash.

2004-02-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-list-of-processors): fixed spamassassin variable names

2004-02-03  Jesper Harder  <harder@ifa.au.dk>

	* spam.el (spam-check-spamoracle, spam-spamoracle-learn): Fix
	format string mismatch.

	* sieve.el (sieve-deactivate-all): do.

	* nnfolder.el (nnfolder-request-set-mark, nnfolder-save-marks): do.

	* nnlistserv.el (nnlistserv-kk-wash-article): do.

	* nnml.el (nnml-request-set-mark, nnml-save-marks): do.	

	* mm-bodies.el (mm-7bit-chars): Don't include \r.

2004-02-02  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-list-of-checks): added spam-use-BBDB-eclusive to
	the list of checks

2004-01-31  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-pad-base64): Deal with more cases of invalid
	padding.

2004-01-27  Simon Josefsson  <jas@extundo.com>

	* mm-view.el (mm-fill-flowed): Add.
	(mm-inline-text): Use it.  Tiny patch from Ralf Angeli
	<angeli@iwi.uni-sb.de>.

2004-01-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-spamassassin-register-ham-routine)
	(spam-spamassassin-register-spam-routine): fixed function names

2004-01-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-tmp-grouplens): Remove.
	(gnus-summary-line-format): Remove grouplens.

	* gnus-group.el (gnus-group-line-format): Ditto.

	* gnus-spec.el (gnus-format-specs): Ditto.
	(gnus-update-format-specifications): Flush the group format spec
	cache if there's the grouplens stuff.
	(gnus-parse-simple-format): Replace %l with the empty string.

2004-01-27  Steve Youngs  <sryoungs@bigpond.net.au>

	* gnus-spec.el (gnus-parse-simple-format): Fix setq value
	omission. 
	From Jerry James  <james@xemacs.org>

2004-01-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-summary-resend-message-edit): Call mime-to-mml.
	Suggested by Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

2004-01-25  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir--num-file, nnmaildir--mkfile,
	nnmaildir--emlink-p, nnmaildir--eexist-p, nnmaildir--new-number):
	New macros and functions.
	* nnmaildir.el (nnmaildir--group-maxnum, nnmaildir--update-nov):
	Handle > NLINK_MAX messages.
	* nnmaildir.el (nnmaildir-request-set-mark): Use
	nnmaildir--emlink-p and nnmaildir--eexist-p.

2004-01-25  Alex Schroeder  <alex@gnu.org>

	* spam-stat.el (spam-stat-process-directory-age): New option.
	(spam-stat-process-directory): Use it.

2004-01-24  Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>  (tiny change)

	* spam-stat.el (spam-stat-reduce-size): Set spam-stat-dirty.
	(spam-stat-save): Accept prefix argument.

2004-01-23  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir-request-set-mark): Handle the "too many
	links" error.

2004-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Advise byte-optimize-form-code-walker to optimize
	the rest of the and/or forms.

2004-01-23  Jesper Harder  <harder@ifa.au.dk>

	* gnus.el (gnus-tmp-grouplens): Define for the sake of backward
	compatibility with old .newsrc.eld files.

	* gnus-xmas.el (gnus-xmas-grouplens-menu-add): Remove.

	* gnus-sum.el (gnus-summary-line-format-alist): Remove grouplens.

	* gnus-start.el (gnus-1): do.

	* gnus-group.el (gnus-group-line-format-alist): do.

	* gnus.el (gnus-use-grouplens, gnus-visual): do.

	* gnus-gl.el: Remove.

2004-01-23  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-sum.el (gnus-adjust-marks): Now correctly handles a list of
	marks consisting of a single range {for example, (3 . 5)} rather
	than a list of a single range { ((3 . 5)) }.

2004-01-23  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-store-gnus-article-buffer): Use
	with-current-buffer.
	(spam-stat-store-current-buffer): Use insert-buffer-substring to
	avoid consing a string.

	* mm-util.el (mm-charset-synonym-alist): Add ks_c_5601-1987.
	Remove obsolete entries for big5 and gb2312.

2004-01-22  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-sum.el (gnus-adjust-marks): Avoid splicing null INTO the
	uncompressed list.

2004-01-22  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-strip-xref): New function.
	(spam-stat-process-directory): Use it.

	* gnus-util.el (gnus-fetch-field): Don't bind case-fold-search
	here -- it's done in message-fetch-field.

2004-01-21  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-queue-mail,
	gnus-agent-prompt-send-queue): New variables.
	(gnus-agent-send-mail): Use gnus-agent-queue-mail.
	* gnus-draft.el (gnus-group-send-queue): Pass the group name
	"nndraft:queue" along to gnus-draft-send.  Use
	gnus-agent-prompt-send-queue.
	(gnus-draft-send): Rebind gnus-agent-queue-mail to nil when group
	is "nndraft:queue".  Suggested by Gaute Strokkenes
	<gs234@srcf.ucam.org>

	* gnus-agent.el (agent-disable-undownloaded-faces): Removed
	(agent-enable-undownloaded-faces): Added
	(gnus-agent-cat-groups): Use eval-and-compile, not
	eval-when-compile, to define gnus-agent-set-cat-groups as the setf
	method of gnus-agent-cat-groups even when the buffer has been
	evaled.
	(gnus-agent-save-active,gnus-agent-save-active-1): Merged to
	delete gnus-agent-save-active-1.
	(gnus-agent-save-groups): Deleted. Identical to
	gnus-agent-save-active.
	(gnus-agent-write-active): No longer adjust agent's copy of active
	file as agent's adjustments are now stored in their own
	file. Removed optional parameter.
	(gnus-agent-possibly-alter-active): Ignore groups of unagentized
	servers.  Add use of min/max range limits from server's local
	file.
	(gnus-agent-save-alist): Removed unused optional argument.
	(gnus-agent-load-local,gnus-agent-read-and-cache-local),
	(gnus-agent-read-local,gnus-agent-save-local,gnus-agent-get-local),
	(gnus-agent-set-local): A per-server file that keeps min/max range
	limits for articles known to the agent.	 Provides a fast mechanism
	for altering many active ranges.
	(gnus-agent-expire-group,gnus-agent-expire): No longer save the
	active file (local makes it unnecessary).
	(gnus-agent-regenerate-group): Fixed XEmacs compatibility.

	* gnus-cus.el (agent-disable-undownloaded-faces): Removed
	(agent-enable-undownloaded-faces): Added

	* gnus-draft.el (gnus-draft-send): Bind gnus-agent-queue-mail to
	disable it when sending to "nndraft:queue".
	(gnus-group-send-queue): Add safety check to avoid sending queue
	when unplugged.

	* gnus-group.el (gnus-group-catchup): Use new
	gnus-sequence-of-unread-articles, not
	gnus-list-of-unread-articles, to avoid exhausting memory with huge
	numbers of articles.  Use gnus-range-map to avoid having to
	uncompress the unread list.
	(gnus-group-archive-directory,
	gnus-group-recent-archive-directory): Fixed invalid ange-ftp
	reference.

	* gnus-range.el (gnus-range-map): Iterate over list or sequence.
	(gnus-sorted-range-intersection): Intersection of two ranges
	without requiring that they first be uncompressed.

	* gnus-start.el (gnus-activate-group): Unless blocked by the
	caller, possibly expand the active range to include both cached
	and agentized articles.
	(gnus-convert-old-newsrc): Rewrote in anticipation of having
	multiple version-dependent converters.
	(gnus-groups-to-gnus-format): Replaced gnus-agent-save-groups with
	gnus-agent-save-active.
	(gnus-save-newsrc-file): Save dirty agent range limits.

	* gnus-sum.el (gnus-select-newgroup): Replaced inline code with
	gnus-agent-possibly-alter-active.
	(gnus-adjust-marked-articles): Faster handling of simple lists
	
2004-01-21  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-test-directory): New optional argument
	displays a list of files detected.  Suggested by Andrew Cohen
	<cohen@andy.bu.edu>.
	(spam-stat-buffer-words-with-scores): Don't narrow and change
	syntax table here.  Reported by Andrew Cohen <cohen@andy.bu.edu>.

2004-01-20  Teodor Zlatanov  <tzz@lifelogs.com>  

	* spam.el (gnus-summary-mode-map): make spam-generic-score the
	default scoring function
	(spam-generic-score): calls spam-spamassassin-score if
	spam-use-spamassassin or spam-use-spamassassin-headers is on;
	spam-bogofilter-score otherwise.

	From Hubert Chan <hubert@uhoreg.ca>:

	* spam.el (spam-use-spamassassin, spam-use-spamassassin-headers)
	(spam-install-hooks, spam-spamassassin, spam-spamassassin-path)
	(spam-spamassassin-arguments)
	(spam-spamassassin-spam-flag-header)
	(spam-spamassassin-positive-spam-flag-header)
	(spam-spamassassin-spam-status-header, spam-sa-learn-path)
	(spam-sa-learn-rebuild, spam-sa-learn-spam-switch)
	(spam-sa-learn-ham-switch, spam-sa-learn-unregister-switch)
	(spam-list-of-processors, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions)
	(spam-check-spamassassin-headers, spam-check-spamassassin)
	(spam-spamassassin-score)
	(spam-spamassassin-register-with-sa-learn)
	(spam-spamassassin-register-spam-routine)
	(spam-spamassassin-register-ham-routine)
	(spam-assassin-register-spam-routine)
	(spam-assassin-register-ham-routine): add SpamAssassin support
	(spam-bogofilter-score): fix to show article before scoring

	* gnus.el (spam-process, spam-autodetect-methods): add
	spamassassin and spamassassin-headers

	* gnus-registry.el (gnus-registry-split-fancy-with-parent):
	Suppress unnecessary messages.  From Nevin Kapur
	<nkapur@cs.caltech.edu>.

2004-01-20  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-to-hash-table): Use :size keyword in
	make-hash-table.

2004-01-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (base64-encode-string): Don't autoload it.

2004-01-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* run-at-time.el: Remove useless (require 'itimer),
	eval-and-compile and (featurep 'xemacs).

2004-01-16  Jesper Harder  <harder@ifa.au.dk>

	* gnus-msg.el (gnus-post-news): Use blank Newsgroups line if
	GROUP is a virtual group.

2004-01-16  Steve Youngs  <sryoungs@bigpond.net.au>

	* gnus.el: Autoload `message-y-or-n-p'.

2004-01-15  Jesper Harder  <harder@ifa.au.dk>

	* pgg-parse.el: Remove unnecessary (require 'custom).

	* pgg-def.el: do.

	* nnmail.el: do.

	* gnus-undo.el: do.

	* gnus-picon.el: do.

	* gnus-util.el: do.

2004-01-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-pick-line-number): Add autoload.

2004-01-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-multiple-handles): Recognize a string as a mime
	handle, as well as a list.

	* mm-view.el (mm-w3m-cid-retrieve-1): Call itself recursively.
	Suggested by ARISAWA Akihiro <ari@mbf.sphere.ne.jp>.
	(mm-w3m-cid-retrieve): Simplify.

2004-01-14  Kai Grossjohann  <kai@emptydomain.de>

	* message.el (message-kill-to-signature): Allow prefix arg to
	specify number of lines to keep before signature.  From Vasily
	Korytov.
	(message-kill-to-signature): Change docstring.

2004-01-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el: Always require sha1-el.
	(canlock-sha1): Bind sha1-maximum-internal-length to nil.

	* message.el: Autoload sha1 only when compiling.

	* lpath.el: Bind eudc-protocol for both Emacs and XEmacs; fbind
	eudc-expand-inline for XEmacs.

2004-01-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-canlock-generate): Require sha1-el.

2004-01-13  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-expand-name): Silence the byte compiler.

	* lpath.el: Add detect-coding-system.

	* dgnushack.el (dgnushack-compile): Remove obsolete check for
	cus-edit.

2004-01-13  Simon Josefsson  <jas@extundo.com>

	* gnus-score.el (gnus-score-edit-all-score): Fix prototype.
	Invoke gnus-score-mode.  Reported by
	bojohan+news@dd.chalmers.se (Johan Bockg,Ae(Brd).

	* gnus-range.el (gnus-compress-sequence): Doc fix.  Suggested by
	Jim Blandy <jimb@redhat.com> (tiny change).

2004-01-12  Jesper Harder  <harder@ifa.au.dk>

	* gnus-srvr.el (gnus-browse-foreign-server): Reduce consing.

2004-01-12  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-get-article-as-string): updated to use
	gnus-request-article-this-buffer, much simpler
	(spam-get-article-as-buffer): removed

2004-01-12  Kai Grossjohann  <kai.grossjohann@mci.com>

	* message.el (message-expand-name): Use EUDC if the user uses
	that.

2004-01-12  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-parse-and-decode, rfc2047-decode): Use a
	character for the encoding to avoid consing a string.
	
	* rfc2047.el (rfc2047-decode-string): Don't cons a string
	unnecessarily.

	* mm-util.el (mm-replace-chars-in-string): Remove.

	* rfc2047.el (rfc2047-decode): Use mm-subst-char-in-string instead
	of mm-replace-chars-in-string.

2004-01-11  Jesper Harder  <harder@ifa.au.dk>

	* gnus.sum.el (gnus-remove-odd-characters): Don't cons two new
	strings.

	* mm-util.el (mm-subst-char-in-string): Support inplace.	

	* gnus-sum.el (gnus-summary-remove-list-identifiers): Don't cons
	a new string in every iteration.  Use shy groups.

2004-01-10  Jesper Harder  <harder@ifa.au.dk>

	* gnus-start.el (gnus-subscribe-newsgroup, gnus-start-draft-setup)
	(gnus-group-change-level, gnus-kill-newsgroup)
	(gnus-check-bogus-newsgroups, gnus-get-unread-articles-in-group)
	(gnus-get-unread-articles, gnus-make-articles-unread)
	(gnus-make-ascending-articles-unread): Use accessor
	macros (gnus-group-entry, gnus-group-unread, gnus-info-marks etc.)
	to get group information for improved readability.

	* gnus-srvr.el (gnus-browse-unsubscribe-group): do.

	* gnus-soup.el (gnus-soup-group-brew): do.

	* gnus-msg.el (gnus-put-message): do.

	* gnus-move.el (gnus-group-move-group-to-server): do.

	* gnus-kill.el (gnus-batch-score): do.

	* gnus-group.el (gnus-group-prepare-flat, gnus-group-delete-group)
	(gnus-group-update-group-line, gnus-group-insert-group-line-info)
	(gnus-group-update-group, gnus-group-read-group)
	(gnus-group-make-group, gnus-group-make-help-group)
	(gnus-group-make-archive-group, gnus-group-make-directory-group)
	(gnus-group-make-empty-virtual, gnus-group-sort-selected-flat)
	(gnus-group-sort-by-unread, gnus-group-catchup)
	(gnus-group-unsubscribe-group, gnus-group-kill-group)
	(gnus-group-yank-group, gnus-group-set-info)
	(gnus-group-list-groups): do.

	* gnus.el (gnus-generate-new-group-name): do.

	* gnus-delay.el (gnus-delay-send-queue): do.

	* nnvirtual.el (nnvirtual-catchup-group): do.

	* nnkiboze.el (nnkiboze-generate-group, nnkiboze-generate-group):
	do.

	* gnus-topic.el (gnus-topic-find-groups, gnus-topic-clean-alist)
	(gnus-group-prepare-topics, gnus-topic-check-topology): do.
	
	* gnus-sum.el (gnus-update-read-articles, gnus-select-newsgroup)
	(gnus-mark-xrefs-as-read, gnus-compute-read-articles)
	(gnus-summary-walk-group-buffer, gnus-summary-move-article)
	(gnus-group-make-articles-read): do.
	
2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (article-decode-mime-words, article-babel)
	(gnus-article-highlight-signature, gnus-article-add-buttons)
	(gnus-signature-toggle): Use gnus-with-article-buffer.
	
	* gnus-art.el (gnus-article-highlight-headers)
	(gnus-article-add-buttons-to-head): Use gnus-with-article-headers.
	
	* gnus-art.el (gnus-mm-display-part, gnus-article-wash-status)
	(gnus-article-set-globals, gnus-request-article-this-buffer)
	(gnus-button-message-id, gnus-article-maybe-hide-headers)
	(gnus-mime-view-part-externally, gnus-mime-view-part-internally)
	(gnus-mime-display-alternative): Use with-current-buffer.

2004-01-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-generate-fake-headers): rewrite to be simpler,
	also under 80 char limit, and call gnus-error if needed
	(spam-fetch-article-header): finally fixed - it was a
	buffer-local variable (gnus-newsgroup-data)
	(spam-find-spam): use spam-generate-fake-headers, forget about
	spam-insert-fake-headers
	(spam-insert-fake-headers): removed

2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* deuglify.el (gnus-article-outlook-unwrap-lines)
	(gnus-outlook-rearrange-article)
	(gnus-outlook-repair-attribution-outlook)
	(gnus-outlook-repair-attribution-block)
	(gnus-outlook-repair-attribution-other): Remove redundant
	save-excursion.

2004-01-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-fetch-field-fast, spam-fetch-field-from-fast)
	(spam-fetch-field-subject-fast)
	(spam-fetch-field-message-id-fast, spam-generate-fake-headers)
	(spam-fetch-article-header): new functions to deal with Gnus
	internals for fast retrieval of article header data
	(spam-initialize): put spam-find-spam in the gnus-summary-prepared-hook

2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* pop3.el (pop3-md5): Remove.
	(pop3-apop): Replace pop3-md5 with md5.

	* mm-bodies.el: base64 is always built-in.

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Use
	with-current-buffer.

2004-01-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-insert-header): Remove excessive grouping in
	regexp.

	* gnus-sum.el (gnus-summary-read-document): Ditto.

	* gnus-uu.el (gnus-uu-part-number): Ditto.

	* html2text.el (html2text-remove-tags): Ditto.
	(html2text-format-tags): Ditto.
	(html2text-format-single-elements): Ditto.

	* mml.el (mml-parse-1): Ditto.

2004-01-08  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-update-mark): Revert previous change.

	* gnus-group.el (gnus-group-mark-group): Fix for multibyte marks.

	* gnus-sum.el (gnus-summary-update-mark): Fix for multibyte marks.

	* gnus-util.el (gnus-replace-in-string): Remove Emacs 20 code.

2003-11-15  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el (pgg-gpg-lookup-all-secret-keys)
	(pgg-gpg-lookup-key): Use regexp match instead of
	split-string (split-string is different between emacs 21.2 and
	21.4).  Reported by ultrasoul@ultrasoul.com (David D. Smith).

2004-01-08  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-mime-view-all-parts)
	(gnus-article-part-wrapper, gnus-article-view-part): Use
	with-current-buffer.

2004-01-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-disable-spam-split-during-ham-respool)
	(spam-spamoracle-database, spam-cache-lookups)
	(spam-split-last-successful-check, spam-clear-cache, spam-xor)
	(spam-group-ham-mark-p, spam-group-spam-mark-p)
	(spam-group-ham-marks, spam-group-spam-marks)
	(spam-group-spam-contents-p, spam-group-ham-contents-p)
	(spam-list-of-processors, spam-list-of-statistical-checks): doc
	fix, also add spam-use-blackholes to the statistical checks
	(spam-fetch-field-fast): new interface to fetching fields, may
	become a macro
	(spam-fetch-field-from-fast, spam-fetch-field-subject-fast)
	(spam-fetch-field-message-id-fast): use spam-fetch-field-fast
	(spam-insert-fake-headers): fake an article when needed
	(spam-find-spam): fake article when possible
	(spam-check-blackholes, spam-check-BBDB, spam-from-listed-p)
	(spam-check-bogofilter-headers): use message-fetch-field instead
	of nnmail-fetch-field

2004-01-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-score-find-trace): Add `k' (kill-buffer).

2004-01-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-split): do not require spam-use-CHECK to be
	enabled if that check is passed to spam-split explicitly; also
	fix so 'spam doesn't get converted to spam-split-group when
	spam-split-symbolic-return is t
	(spam-find-spam): find registrations of the article and use those
	instead of re-running spam-split to find the spam/ham
	classification of the article
	(spam-log-processing-to-registry, spam-log-registered-p)
	(spam-log-unregistration-needed-p, spam-log-undo-registration):
	use gnus-error instead of gnus-message
	(spam-log-registration-type): new function to determine the
	classification of a message based on registry entries; will
	return nil if both 'spam and 'ham are found
	(spam-check-BBDB): expand all the BBDB macros here so we can have
	a reasonably fast local cache without the loading errors
	(spam-cache-lookups): set to t by default
	(spam-find-spam): don't try to guess spam-cache-lookups
	(spam-enter-whitelist, spam-enter-blacklist): also clear the
	spam-caches entry
	(spam-filelist-build-cache, spam-filelist-check-cache): better
	caching of whitelist/blacklist entries
	(spam-check-whitelist, spam-check-blacklist): invoke
	spam-from-listed-p with a type, not a cache variable
	(spam-from-listed-p): wrap around spam-filelist-check-cache

2004-01-07  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-cite-prefix-regexp): Use with-syntax-table.

	* nnmail.el (nnmail-split-fancy): do.

	* mml.el (mml-parse): do.

	* gnus-score.el (gnus-enter-score-words-into-hashtb)
	(gnus-score-adaptive): do.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-treat-emphasize): Ignore Emacs version number.
	(gnus-mime-button-map): Don't set keymap parent.
	(gnus-button-ctan-directory-regexp): Use shy grouping.
	(gnus-prev-page-map): Don't set keymap parent.
	(gnus-prev-page-map): Remove duplicated one.
	(gnus-next-page-map): Don't set keymap parent.
	(gnus-mime-security-button-map): Ditto.

	* nnheader.el (nnheader-directory-files-is-safe): Ignore Emacs
	version number.

	* sha1-el.el (sha1-string-external): Use with-temp-buffer.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-sha1-function): Remove.
	(canlock-sha1-function-for-verify): Remove.
	(canlock-openssl-program): Remove.
	(canlock-openssl-args): Remove.
	(canlock-ignore-errors): Remove.
	(canlock-sha1-with-openssl): Remove.
	(canlock-sha1): Use sha1 instead of to call canlock-sha1-function.
	(canlock-verify): Don't use canlock-ignore-errors.

	* sha1-el.el (sha1-string-external): Make it can return a string
	in binary form.
	(sha1-region-external): Ditto.
	(sha1-string-internal): Ditto.
	(sha1-region-internal): Ditto.
	(sha1-region): Ditto.
	(sha1-string): Ditto.
	(sha1): Ditto.

2004-01-07  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam.el (spam-report-articles-gmane): New command.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el: Don't make unnecessary *Group* buffer when loading.

	* run-at-time.el (run-at-time-saved): Remove.
	(run-at-time): Doc fix.

2004-01-07  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-limit-to-replied): New command.
	(gnus-summary-limit-map): Add it.
	(gnus-summary-make-menu-bar): do.

2004-01-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-cache-lookups, spam-caches, spam-clear-cache):
	first attempt at some caching support (done for BBDB only now)
	(spam-find-spam): set spam-cache-lookups if there are more than 2
	addresses to be checked
	(spam-clear-cache-BBDB): new function, to be invoked by
	bbdb-change-hook, and triggering spam-clear-cache of 'spam-use-BBDB
	(spam-check-BBDB): check and use the caches, if
	spam-cache-lookups is on
	remove superfluous (provide)

2004-01-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-ansi-sequences): Changed default.

2004-01-07  Steve Youngs  <sryoungs@bigpond.net.au>

	* run-at-time.el (run-at-time-saved): Move to after the definition
	of `run-at-time'.

	* dgnushack.el: Autoload `font-lock-fontify-buffer' in XEmacs.

2004-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-wash-html-with-w3m): Don't use
	mm-w3m-local-map-property.

	* mm-view.el (mm-w3m-mode-map): Remove.
	(mm-w3m-local-map-property): Remove.
	(mm-inline-text-html-render-with-w3m): Don't use
	mm-w3m-local-map-property.

2004-01-06  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* run-at-time.el: New file.

	* dgnushack.el (dgnushack-compile): Don't compile run-at-time
	under Emacs.

	* gnus.el ((fboundp 'gnus-set-text-properties)): Remove definition
	of gnus-set-text-properties.

	* gnus-uu.el (gnus-uu-save-article): Ditto.

	* gnus-salt.el (gnus-carpal-setup-buffer): Ditto.

	* gnus-cite.el (gnus-cite-parse): Ditto.

	* gnus-art.el (gnus-button-push): Use set-text-properties instead
	of gnus-.

	* gnus-xmas.el (run-at-time): Require run-at-time.

	* gnus.el: Changed calls to nnheader-run-at-time and
	password-run-at-time throughout to use run-at-time directly.

	* password.el: Removed definition of run-at-time.

	* nnheaderxm.el: Remove definition of run-at-time.

2004-01-05  Karl Pfl,Ad(Bsterer  <sigurd@12move.de>

	* mml.el (mml-minibuffer-read-disposition): Show attachment type
	in prompt (tiny change)

2004-01-06  Steve Youngs  <sryoungs@bigpond.net.au>

	* messagexmas.el (message-xmas-redefine): Alias
	`message-make-caesar-translation-table' to
	``message-xmas-make-caesar-translation-table' regardless of XEmacs
	version.

	* gnus-xmas.el (gnus-xmas-set-text-properties): Removed.
	(gnus-xmas-define): Don't alias `gnus-set-text-properties' to
	`gnus-xmas-set-text-properties'.
	(gnus-xmas-redefine): Don't alias `gnus-completing-read' to
	`gnus-xmas-completing-read'. 
	(gnus-xmas-completing-read): Removed.
	(gnus-xmas-open-network-stream): Removed.

	* gnus-ems.el (gnus-mode-line-modified): Don't conditionalise on
	XEmacs version.

	* dns.el (dns-make-network-process): Use `open-network-stream'
	instead of `gnus-xmas-open-network-stream'.

	* dgnushack.el: Remove some XEmacs 21.1 specific stuff.

	* .cvsignore: Add auto-autoloads.el, custom-load.el.

2004-01-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-mime-display-alternative)
	(gnus-insert-mime-button, gnus-insert-mime-security-button)
	(gnus-insert-prev-page-button, gnus-insert-next-page-button):
	Don't use gnus-local-map-property.

	* gnus-util.el (gnus-local-map-property): Remove.

	* mm-view.el (mm-view-pkcs7-decrypt): Replace
	gnus-completing-read-maybe-default with completing-read.

	* gnus-util.el (gnus-completing-read): do.
	(gnus-completing-read-maybe-default): Remove.

2004-01-06  Steve Youngs  <sryoungs@bigpond.net.au>

	* password.el: Only autoload `run-at-time' if not XEmacs.
	Only autoload the itimer functions if XEmacs.

2004-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-xmas-define): Defun char-width for non-MULE
	XEmacsen.

	* dgnushack.el: Autoload executable-find for XEmacs.

2004-01-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-read-string): Remove.
	(gnus-summary-pipe-to-muttprint): Replace gnus-read-string with
	read-string.

2004-01-05  Teodor Zlatanov  <tzz@lifelogs.com>

	* netrc.el: autoload password-read
	(netrc): new configuration group
	(netrc-encoding-method, netrc-openssl-path): configuration
	variables for encoding and decoding of files with symmetric
	ciphers
	(netrc-encode): assistant function to encode a file with
	netrc-encoding-method
	(netrc-parse): added interactive parameter, added optional
	decoding if netrc-encoding-method is non-nil but otherwise
	behavior is standard
	(netrc-encrypting-method, netrc-encrypt, netrc-parse):
	s/encode/encrypt/ everywhere

	* spam.el: remove executable-find autoload

2004-01-05  Jesper Harder  <harder@ifa.au.dk>

	* gnus-registry.el: Remove Emacs 20 hash table compatibility code.

	* gnus-uu.el (gnus-uu-post-encoded): bury-buffer is always fbound.

2004-01-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-ansi-sequences,
	article-treat-ansi-sequences): New variable and function.
	Suggested by Dan Jacobson <jidanni@jidanni.org>.

	* gnus-sum.el (gnus-summary-wash-map, gnus-summary-make-menu-bar):
	Use it.

2004-01-05  Jesper Harder  <harder@ifa.au.dk>

	* mm-util.el (mm-quote-arg): Remove.

	* mm-decode.el (mm-mailcap-command): Replace mm-quote-arg with
	shell-quote-argument.

	* gnus-uu.el (gnus-uu-command): do.

	* gnus-sum.el (gnus-summary-insert-pseudos): do.

	* ietf-drums.el (ietf-drums-token-to-list): Replace mm-make-char
	with make-char.

	* mm-util.el (mm-make-char): Remove.

	* mml.el (mml-mode): Replace gnus-add-minor-mode with
	add-minor-mode.

	* gnus-undo.el (gnus-undo-mode): do.

	* gnus-topic.el (gnus-topic-mode): do.

	* gnus-sum.el (gnus-dead-summary-mode): do.

	* gnus-start.el (gnus-slave-mode): do.

	* gnus-salt.el (gnus-binary-mode, gnus-pick-mode): do.

	* gnus-ml.el (gnus-mailing-list-mode): do.

	* gnus-gl.el (gnus-grouplens-mode): do.

	* gnus-draft.el (gnus-draft-mode): do.

	* gnus-dired.el (gnus-dired-mode): do.

	* gnus-ems.el (gnus-add-minor-mode): Remove.

	* gnus-spec.el (gnus-correct-length, gnus-correct-substring):
	Replace gnus-char-width with char-width.

	* gnus-ems.el (gnus-char-width): Remove.

	* gnus-spec.el (gnus-correct-length, gnus-correct-substring):
	Replace gnus-char-width with char-width.

	* gnus-ems.el (gnus-char-width): Remove.

	* spam-stat.el (with-syntax-table): Remove with-syntax-table
	definition.
	Remove Emacs 20 hash table compatibility code.

	* rfc2047.el (with-syntax-table): Remove with-syntax-table Emacs
	20 compatibility code.

	* spam.el (spam-point-at-eol): Replace with point-at-eol.

	* smime.el (smime-point-at-eol): Replace with point-at-eol.

	* rfc2047.el (rfc2047-point-at-bol, rfc2047-point-at-eol): Replace
	with point-at-{eol,bol}.

	* netrc.el (netrc-point-at-eol): Replace with point-at-eol.

	* imap.el (imap-point-at-eol): Replace with point-at-eol.

	* flow-fill.el (fill-flowed-point-at-bol,
	fill-flowed-point-at-eol): Replace with point-at-{eol,bol}.

	* gnus-util.el (gnus-point-at-bol, gnus-point-at-eol): Remove.
	Replace with point-at-{eol,bol} throughout all files.

2004-01-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* ntlm.el (ntlm-string-as-unibyte): New macro.
	(ntlm-build-auth-response): Use it.

	Remove Emacs 20 stuff:
	* dgnushack.el (dgnushack-compile): Don't modify max-specpdl-size.
	(butlast, mapc, remove): Remove the compiler macros.
	* gnus-msg.el (gnus-summary-news-other-window): Use remove instead
	of delq and copy-sequence.
	* gnus-art.el (popup-menu): Remove the compiler macro.
	* nnmail.el (nnmail-split-fancy): Don't support customizing with
	Emacs 20.

2004-01-05  Simon Josefsson  <jas@extundo.com>

	* ntlm.el: Fix namespace.  Change smb-passwd-hash into
	ntlm-smb-passwd-hash, smb-owf-encrypt into ntlm-smb-owf-encrypt,
	smb-passwd-hash into ntlm-smb-passwd-hash, smbdes-e-p16 into
	ntlm-smb-des-e-p16, smbdes-e-p24 into ntlm-smb-des-e-p24, smbhash
	into ntlm-smb-hash, smb-sp8 into ntlm-smb-sp8, smb-str-to-key into
	ntlm-smb-str-to-key, smb-dohash into ntlm-smb-dohash, smb-perm1
	into ntlm-smb-perm1, smb-perm2 into ntlm-smb-perm2, smb-perm3 into
	ntlm-smb-perm3, smb-perm4 into ntlm-smb-perm4, smb-perm5 into
	ntlm-smb-perm5, smb-perm6 into ntlm-smb-perm6, smb-sc into
	ntlm-smb-sc, smb-sbox into ntlm-smb-sbox, string-permute into
	ntlm-string-permute, string-lshift into ntlm-string-lshift,
	string-xor into ntlm-string-xor.  Suggested by
	Jesper Harder <harder@myrealbox.com>.

	* ntlm.el: Don't include poem.

	* md4.el (print-int32, print-string-hexa): Remove.  Suggested by
	Jesper Harder <harder@myrealbox.com>.

	* sasl-ntlm.el, ntlm.el, md4.el: New files.

	* hmac-md5.el (md5-binary): Fix byte compile warning.  (This
	probably breaks emacs with DL patch, but do we care? Is anyone
	still using the DL stuff?)

	* sieve-manage.el: Use the password package.
	(sieve-manage-read-passwd): Remove.
	(sieve-manage-interactive-login): Use password.  Re-add
	condition-case around loop.

	* pgg.el (pgg-passphrase-cache, pgg-run-at-time): Remove.
	(pgg-add-passphrase-cache, pgg-remove-passphrase-cache): Use
	the password package.

2003-02-19  Simon Josefsson  <jas@extundo.com>

	* sieve-manage.el (sieve-sasl-auth): Quote optional initial SASL
	token.

2002-08-07  Simon Josefsson  <jas@extundo.com>

	* sieve-manage.el (require): Use SASL, not RFC2104/MD5.
	(sieve-manage-authenticators):
	(sieve-manage-authenticator-alist): Add some SASL mechs.
	(sieve-sasl-auth): New function.
	(sieve-manage-cram-md5-auth):
	(sieve-manage-plain-auth): Rewrite using SASL library.
	(sieve-manage-digest-md5-p, sieve-manage-digest-md5-auth)
	(sieve-manage-scram-md5-p, sieve-manage-scram-md5-auth)
	(sieve-manage-ntlm-p, sieve-manage-ntlm-auth)
	(sieve-manage-login-p, sieve-manage-login-auth): Add wrappers.

2004-01-05  Simon Josefsson  <jas@extundo.com>

	* sasl.el, sasl-cram.el, sasl-digest.el, hmac-md5.el, hmac-def.el:
	New files.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-no-groups-message): Update.

	* gnus-sum.el (gnus-summary-insert-new-articles): Remove . 

2003-11-09  Simon Josefsson  <jas@extundo.com>

	* imap.el: Support for ID IMAP extension (RFC 2971).
	(imap-local-variables): Add imap-id.
	(imap-id): New variable.
	(imap-id): New function.
	(imap-parse-response): Parse untagged ID response.
	* nnimap.el (nnimap-id): New variable.
	(nnimap-open-connection): Use it.

2003-12-28  Simon Josefsson  <jas@extundo.com>

	* gnus-score.el (gnus-score-edit-all-score): New.
	* gnus-group.el (gnus-group-score-map): Bind it to W e.

2004-01-04  Simon Josefsson  <jas@extundo.com>

	* password.el: Add.

2004-01-04  Mario Lang  <lang@zid.tugraz.at>

	* dns.el: Add support for AAAA records (see RFC 3596)

	* Fix typo PRT -> PTR

	* Parse MX, PTR and SOA replies (see RFC 1035)

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-logo-color-style): Changed colors to `no'.

	* Moved to Changelog.2.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump version.

2004-01-04 Lars Magne Ingebrigtsen <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.1 is released.

2004-01-04 Lars Magne Ingebrigtsen <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.0 is released.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump.
	(gnus-version): No.

See ChangeLog.2 for earlier changes.

    Copyright (C) 2000, 2001, 2002, 2004 Free Software Foundation, Inc.
  Copying and distribution of this file, with or without modification,
  are permitted provided the copyright notice and this notice are preserved.

;; Local Variables:
;; coding: iso-2022-7bit
;; End:

;;; arch-tag: 3f33a3e7-090d-492b-bedd-02a1417d32b4
